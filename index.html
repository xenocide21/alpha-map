<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html lang="en">
<head>
    <title>Oberin Map</title>
    <style type="text/css">
        body {
            overflow: hidden;
            background-image: url("images/10-3-Panther-Desktop.png");
            background-size: 100% 100%;
            -webkit-app-region: drag;
            width: 100%;
            height: 100%;
        }
        #magchanger {
            -webkit-app-region: no-drag;
        }
        #sidebar {
            -webkit-app-region: no-drag;
        }
        #sidebar2{
            -webkit-app-region: no-drag;
        }
        #search {
            -webkit-app-region: no-drag;
        }
        #pins {
            -webkit-app-region: no-drag;
        }
        #map {
            -webkit-app-region: no-drag;
            position: absolute;
            left: 50%;
            overflow: hidden;
            z-index: 10;
            margin-top: 20px;
            margin-left: -320px;
            background: #000;
            height: 640px;
            width: 640px;
            border: 1px solid #000;
        }

        #mapgrid {
            position: absolute;
            top: -144px;
            left: -144px;
            z-index: 5;
            border-collapse: collapse;
            height: 896px;
            width: 896px;
        }

        #mapgrid img {
            display: block;
        }

        #magchanger {
            position: absolute;
            left: 50%;
            padding: 0;
            margin-left: -315px;
            margin-top: 25px;
            z-index: 20;
            border-collapse: collapse;
        }

        #magchanger img {
            display: block;
            padding: 0;
            margin: 0;
        }

        #sidebar {
            position: absolute;
            left: 50%;
            z-index: 20;
            margin-left: 325px;
            margin-top: 25;
            width: 185px;
        }

        #sidebar2 {
            position: absolute;
            right: 50%;
            z-index: 20;
            margin-right: 325px;
            margin-top: 25;
            width: 185px;
        }

        #loadingbox {
            position: absolute;
            left: 50%;
            padding: 0;
            margin-left: -315px;
            margin-top: 25px;
            font-size: 15px;
            font-weight: bold;
            color: #f00;
            text-align: center;
            z-index: 20;
            height: 0;
            width: 630px;
            overflow: visible;
        }

        #warningbox {
            position: absolute;
            left: 50%;
            padding: 0;
            margin-left: -315px;
            margin-top: 305px;
            font-size: 15px;
            font-weight: bold;
            color: #f00;
            text-align: center;
            z-index: 20;
            height: 0;
            width: 630px;
            overflow: hidden;
        }

        #tipbox {
            position: absolute;
            left: 50%;
            padding: 0;
            margin-left: -294px;
            margin-top: 25px;
            font-size: 15px;
            font-weight: bold;
            color: #fff;
            z-index: 20;
            height: 0;
            width: 500px;
            overflow: visible;
        }

        #coordsbox {
            position: absolute;
            left: 50%;
            padding: 0;
            margin-left: 0;
            margin-top: 25px;
            font-size: 15px;
            font-weight: bold;
            color: #fff;
            text-align: right;
            z-index: 20;
            width: 315px;
            height: 0;
            overflow: visible;
        }

        #search {
            display: none;
        }

        #keys {
            display: none;
        }

        #settings {
            display: none;
        }
    </style>
</head>
<body>

<script type="text/javascript">
    // <!--
    function hidify_showify(e_table, e_img) {
        if (document.getElementById) {
            var id_table = document.getElementById(e_table).style;
            var id_img = document.getElementById(e_img);

            //Set the object to table-cell if the browser is
            //Firefox and block if it is anything else.
            if (navigator.userAgent.indexOf("Firefox") !== -1) {
                if (id_table.display === "table-cell") {
                    id_table.display = "none";
                    id_img.src = "./images/arrow_down.gif";
                    id_img.alt = "Expand";
                } else {
                    id_table.display = "table-cell";
                    id_img.src = "./images/arrow_up.gif";
                    id_img.alt = "Collapse";
                }
            } else {
                if (id_table.display === "block") {
                    id_table.display = "none";
                    id_img.src = "./images/arrow_down.gif";
                    id_img.alt = "Expand";
                } else {
                    id_table.display = "block";
                    id_img.src = "./images/arrow_up.gif";
                    id_img.alt = "Collapse";
                }
            }
            return false;
        } else {
            return true;
        }
    }

    // -->
</script>

<script type="text/javascript">
    labels = [[1911, 943, "14pt", "Lerilin", "The Fishing Village of Lerilin"],
        [1327, 327, "14pt", "Marali", "Marali"],
        [1208, 1471, "14pt", "Mirith", "Mirith"],
        [499, 1196, "14pt", "Duldrus", "Duldrus"],
        [2006, 1735, "14pt", "Andris", "The Grand City of Andris - No pets allowed"],
        [1521, 590, "8pt", "Aborek", "Aborek"],
        [977, 1150, "8pt", "Gohoran", "Gohoran Community"],
        [1365, 1242, "8pt", "Foehan", "Town of Foehan"],
        [1776, 1022, "8pt", "Rebel Island", "Rebel Island"],
        [1771, 689, "8pt", "PvP Island", "Player-vs-Player Island"],
        [1971, 1476, "8pt", "Brigobaen", "Brigobaen"],
        [900, 1927, "8pt", "Lizard Man's Fort", "Lizard Man's Fort"],
        [1138, 1928, "8pt", "Welif Docks", "Welif Docks"],
        [1703, 1523, "8pt", "Port Gast", "Port Gast"],
        [1235, 731, "6pt", "Wall of Trees", "Wall of Trees"],
        [2219, 1298, "6pt", "Volcano", "Volcano"],
        [930, 1740, "6pt", "Nabura", "What is Nabura? -Z"],
        [1351, 2596, "6pt", "Jinker Islands", "Jinker Islands"]];

    portals = [[1323, 1355, "green", "Green Portal"],
        [703, 1143, "blue", "Blue Portal"],
        [1849, 1789, "red", "Red Portal"],
        [1779, 651, "disabled2", "Mushroom Flatbread"],
        [1396, 475, "purple", "Purple Portal"],
        [1883, 1052, "orange", "Orange Portal"]];
</script>

<script type="text/javascript">
    // <!--
    Bank = "bank";
    Stable = "barn";
    Castle = "castle";
    Temple = "cross";
    Jail = "jail";
    Chess = "chess";
    Down = "down";
    Fireplace = "cook";
    Forge = "bsing";
    DdForge = "nobsing";
    SignArchery = "bow";
    SignArmory = "shield";
    SignForge = "bsing";
    SignGeneral = "torch";
    SignHouse = "house";
    SignInfo = "info";
    SignInn = "hotel";
    SignJeweler = "white";
    SignMagic = "stars";
    SignPotion = "bottle";
    SignPub = "beer";
    SignReagent = "leaf";
    SignRestaurant = "food";
    SignTailor = "scissors";
    SignTinker = "pliers";
    SignWeapons = "sword";
    SmChest = "chest";
    Up = "up";
    Guillotine = "guillotn";
    Curiosity = "trans";
    Statue = "trans";
    Grave = "death";
    Bed = "house";
    GuildHall = "guild";
    FirePortal = "fire";

    flag = new Array(11);
    flag[0] = [[1363, 347, Castle, "? (Castle)"],
        [1960, 939, Chess, "Chess Board"],
        [2173, 1209, Down, "Rat Cave"],
        [1955, 1757, Down, "Andris Sewers"],
        [1365, 364, Down, "Marali Sewers"],
        [1786, 1004, GuildHall, "Rhovanion Rebels Guild Hall"],
        [975, 956, GuildHall, "The Ruins of the Mari Ranger Guild Hall"],
        [1802, 1114, GuildHall, "Three Paths Guild Hall"],
        [1645, 1186, GuildHall, "Roman Empire Guild Hall"],
        [1797, 1561, GuildHall, "Abashiri Guild Hall"],
        [2246, 1373, GuildHall, "Peace Givers Guild Hall"],
        [2119, 1677, GuildHall, "Druid Circle Guild Hall"],
        [2191, 1285, GuildHall, "Samourai Freiheit Guild Hall"],
        [1776, 1479, GuildHall, "Sect of the Crystal Guild Hall"],
        [2038, 1187, SignHouse, "House of the Hermit"],
        [1211, 1930, SignHouse, "'This House Has An Owner.'  Anyone know who the owner is?  -Z"],
        [1294, 771, SignHouse, "House of the Special Items Buyer"],
        [1347, 343, Bank, "Bank"],
        [694, 950, Temple, "? (Temple)"],
        [1113, 921, Down, "Cave Dungeon"],
        [1121, 1476, SignArchery, "? (Archery Shop)"],
        [1116, 1463, Stable, "Stable"],
        [1169, 1496, Statue, "? (Statue)"],
        [1969, 1451, Statue, "? (Statue)"],
        [1005, 790, SignInfo, "? (Road Sign)"],
        [1122, 1467, SignInfo, "? (Road Sign)"],
        [1125, 1902, SignInfo, "? (Road Sign)"],
        [1127, 1501, SignInfo, "? (Road Sign)"],
        [1149, 1457, SignInfo, "? (Road Sign)"],
        [1163, 1501, SignInfo, "? (Road Sign)"],
        [1164, 1487, SignInfo, "? (Road Sign)"],
        [1207, 1474, SignInfo, "? (Road Sign)"],
        [1243, 1463, SignInfo, "? (Road Sign)"],
        [1273, 1400, SignInfo, "? (Road Sign)"],
        [1323, 348, SignInfo, "? (Road Sign)"],
        [1353, 390, SignInfo, "? (Road Sign)"],
        [1383, 1237, SignInfo, "? (Road Sign)"],
        [1392, 484, SignInfo, "? (Road Sign)"],
        [1394, 884, SignInfo, "? (Road Sign)"],
        [1493, 1720, SignInfo, "? (Road Sign)"],
        [1549, 1244, SignInfo, "? (Road Sign)"],
        [1582, 1226, SignInfo, "? (Road Sign)"],
        [1698, 1530, SignInfo, "? (Road Sign)"],
        [1808, 1134, SignInfo, "? (Road Sign)"],
        [1920, 993, SignInfo, "? (Road Sign)"],
        [1948, 1470, SignInfo, "? (Road Sign)"],
        [1981, 985, SignInfo, "? (Road Sign)"],
        [1996, 1760, Temple, "'In memory of Senator Waltham - Rest in Peace' (Temple)"],
        [2034, 1305, SignInfo, "? (Road Sign)"],
        [2230, 1340, SignInfo, "? (Road Sign)"],
        [540, 1190, SignInfo, "? (Road Sign)"],
        [550, 1237, SignInfo, "? (Road Sign)"],
        [968, 914, SignInfo, "? (Road Sign)"],
        [980, 1132, SignInfo, "? (Road Sign)"],
        [1129, 1514, Jail, "Jail"],
        [1152, 1434, Castle, "Mirith Castle - Home of King Galandir"],
        [1130, 1484, SignArmory, "? (Armor Store)"],
        [1136, 1491, SignTailor, "? (Tailor)"],
        [1138, 1476, SignJeweler, "? (Jewelry Store)"],
        [1146, 1470, SignPotion, "? (Potion Shop)"],
        [1142, 1495, Fireplace, "Fireplace"],
        [1128, 1432, Down, "Chucky's Hallway"],
        [1153, 1424, Down, "Chucky's Hallway"],
        [1144, 1498, SignWeapons, "? (Weapons Shop)"],
        [1156, 1479, Bank, "Bank"],
        [1158, 1506, Temple, "? (Temple)"],
        [1151, 1464, SignReagent, "? (Reagent Shop)"],
        [1165, 1923, SignGeneral, "? (General Store)"],
        [1166, 1453, SignInn, "? (Inn)"],
        [1167, 1440, Down, "Mirith Sewers (Down 2 levels)"],
        [1163, 1517, SignTinker, "? (Tinkering Shop)"],
        [1177, 1469, SignForge, "? (Forge)"],
        [1177, 1512, SignPub, "? (Pub)"],
        [1175, 1488, Fireplace, "Fireplace"],
        [1176, 1931, Fireplace, "Fireplace"],
        [1176, 1937, Chess, "Chess Board"],
        [1178, 1508, Chess, "Chess Board"],
        [1148, 1418, Forge, "? (Forge)"],
        [1133, 1433, Forge, "? (Forge)"],
        [1495, 567, DdForge, "Extinct Forge"],
        [1525, 548, DdForge, "Extinct Forge"],
        [1180, 1932, SignPub, "? (Pub)"],
        [1182, 1491, SignRestaurant, "? (Restaurant)"],
        [1194, 1477, SignGeneral, "? (General Store)"],
        [1204, 1488, SignMagic, "? (Magic Shop)"],
        [1255, 1591, Down, "Crypt Dungeon"],
        [1292, 387, SignReagent, "? (Reagent Shop)"],
        [1299, 380, SignTailor, "? (Tailor)"],
        [1298, 392, SignPotion, "? (Potion Shop)"],
        [1305, 397, SignArmory, "? (Armor Store)"],
        [1307, 373, SignWeapons, "? (Weapons Shop)"],
        [1309, 403, SignArchery, "? (Archery Shop)"],
        [1306, 386, SignTinker, "? (Tinkering Shop)"],
        [1315, 366, Stable, "Stable"],
        [1317, 409, SignMagic, "? (Magic Shop)"],
        [1320, 392, SignPub, "? (Pub)"],
        [1320, 370, SignJeweler, "? (Jewelry Store)"],
        [1327, 380, Fireplace, "Fireplace"],
        [1322, 402, SignRestaurant, "? (Restaurant)"],
        [1329, 382, SignRestaurant, "? (Restaurant)"],
        [1330, 394, Forge, "? (Forge)"],
        [1335, 374, SignInn, "? (Inn)"],
        [1337, 387, SignGeneral, "? (General Store)"],
        [1317, 382, Temple, "? (Temple)"],
        [1375, 359, Forge, "? (Forge)"],
        [1419, 1816, Forge, "? (Forge)"],
        [1481, 2317, Down, "Skull Island Dungeon"],
        [1494, 557, Down, "Aborek Dungeon"],
        [1677, 1517, Forge, "? (Forge)"],
        [1677, 1532, SignRestaurant, "? (Restaurant)"],
        [1676, 1530, Fireplace, "Fireplace"],
        [1677, 1523, SignPotion, "? (Potion Shop)"],
        [1694, 1540, SignGeneral, "? (General Store)"],
        [1665, 1532, Stable, "Stable"],
        [1925, 955, SignRestaurant, "? (Restaurant)"],
        [1939, 968, SignInn, "? (Inn)"],
        [1933, 947, SignTailor, "? (Tailor)"],
        [1938, 1760, Stable, "Andris Stable"],
        [1940, 942, SignTinker, "? (Tinkering Shop)"],
        [1950, 940, SignForge, "? (Forge)"],
        [1956, 955, SignGeneral, "? (General Store)"],
        [1953, 1730, SignInn, "Andris Quality Accomodation - Proprietor Bayldan (Inn)"],
        [1915, 965, Bank, "Bank"],
        [1962, 967, SignMagic, "? (Magic Shop)"],
        [1962, 938, SignRestaurant, "? (Restaurant)"],
        [1959, 1744, SignWeapons, "The Crossed Glaives (Weapons Shop)"],
        [1967, 947, SignReagent, "? (Reagent Shop)"],
        [1968, 1751, SignMagic, "The Amazingly Powerful Kendra (Magic Shop)"],
        [1971, 959, SignArmory, "? (Armor Store)"],
        [1974, 1723, Chess, "Chess Board"],
        [1969, 1737, SignArmory, "The Helm and Shield (Armor Store)"],
        [1977, 1721, Chess, "Chess Board"],
        [1978, 1762, SignArchery, "The Archer's Arrows (Archery Shop)"],
        [1981, 1749, Forge, "The Hammer and Anvil (Forge)"],
        [1980, 952, SignJeweler, "? (Jewelry Store)"],
        [1979, 971, SignArchery, "? (Archery Shop)"],
        [1985, 1734, Chess, "Chess Board"],
        [1985, 1018, Down, "Anthill"],
        [1988, 1731, Chess, "Chess Board"],
        [1952, 988, Jail, "Jail"],
        [2243, 1315, Jail, "The Pit"],
        [1935, 989, Stable, "Stable"],
        [1996, 985, SignPotion, "? (Potion Shop)"],
        [1981, 988, Temple, "? (Temple)"],
        [1988, 1772, SignGeneral, "First Stop for Supplies (General Store)"],
        [1988, 962, SignWeapons, "? (Weapons Shop)"],
        [2000, 969, SignRestaurant, "? (Restaurant)"],
        [1996, 1780, SignPotion, "Frebeth - Master Alchemist (Potion Shop)"],
        [2007, 1770, SignTailor, "Andrisian Scarlet - Fine Clothes (Tailor)"],
        [2028, 1759, SignRestaurant, "The Gourmet's Paradise (Restaurant)"],
        [2017, 1744, Bank, "Andris Bank"],
        [2003, 1785, Temple, "Andris Temple"],
        [2038, 1750, Forge, "Forge inside The Gourmet's Paradise Restaurant"],
        [2044, 1739, SignTinker, "Thalek's Tool Emporium (Tinkering Shop)"],
        [2051, 1733, SignJeweler, "Rodolpho's Fabulous Jewellery and Crystal Boutique (Jewelry Store)"],
        [2058, 1708, Castle, "Andris Castle"],
        [2075, 1681, Jail, "Andris Jail"],
        [2229, 1340, Down, "Volcano Dungeon"],
        [2291, 1349, FirePortal, "Portal to Hell"],
        [459, 1189, SignWeapons, "? (Weapons Shop)"],
        [466, 1199, SignPotion, "? (Potion Shop)"],
        [468, 1182, SignTailor, "? (Tailor)"],
        [470, 1197, SignArchery, "? (Archery Shop)"],
        [471, 1177, SignInn, "? (Inn)"],
        [518, 1224, SignRestaurant, "? (Restaurant)"],
        [525, 1210, SignArmory, "? (Armor Store)"],
        [531, 1199, SignGeneral, "? (General Store)"],
        [550, 1223, Forge, "? (Forge)"],
        [124, 1350, Down, "Ice Dungeon"],
        [748, 1064, Down, "'Unidentified' Dungeon"],
        [881, 1706, Down, "Tunnel to Mainland"],
        [900, 1894, Forge, "? (Forge)"],
        [977, 958, Down, "Tree Maze Dungeon"],
        [981, 1121, Forge, "? (Forge)"],
        [998, 1476, Down, "Tunnel to Lizard Man's Island"],
        [1236, 1595, Grave, "Cemetary"],
        [1301, 772, Grave, "Cemetary"],
        [1335, 2167, Temple, "? (Temple)"],
        [1363, 1229, Bed, "? (House)"],
        [1367, 1223, Bed, "? (House)"],
        [1375, 1230, Bed, "? (House)"],
        [1377, 1222, Bed, "? (House)"],
        [1401, 1822, Bed, "? (House)"],
        [1442, 405, Grave, "Cemetary"],
        [1520, 524, Grave, "Cemetary"],
        [1841, 648, Temple, "? (Temple)"],
        [1964, 1457, Temple, "? (Temple)"],
        [1957, 994, Guillotine, "? (Gallows)"],
        [2070, 1675, Guillotine, "? (Gallows)"],
        [2084, 976, Grave, "Cemetary"],
        [2164, 1666, Grave, "Cemetary"],
        [980, 1100, Bed, "? (House)"],
        [989, 1133, Bed, "? (House)"],
        [1122, 1436, Curiosity],
        [1125, 1443, Curiosity],
        [1932, 1001, Curiosity],
        [1961, 1457, Curiosity],
        [972, 953, Curiosity],
        [974, 957, Curiosity],
        [975, 953, Curiosity],
        [1161, 1451, Fireplace, "Fireplace"],
        [1164, 1448, Fireplace, "Fireplace"],
        [1166, 1455, Fireplace, "Fireplace"],
        [1167, 1446, Fireplace, "Fireplace"],
        [1168, 1453, Fireplace, "Fireplace"],
        [1171, 1450, Fireplace, "Fireplace"],
        [1208, 1926, Fireplace, "Fireplace"],
        [1370, 1220, Fireplace, "Fireplace"],
        [1406, 1821, Fireplace, "Fireplace"],
        [1416, 1815, Fireplace, "Fireplace"],
        [1948, 1730, Fireplace, "Fireplace"],
        [1951, 1727, Fireplace, "Fireplace"],
        [1954, 1736, Fireplace, "Fireplace"],
        [1956, 1722, Fireplace, "Fireplace"],
        [1956, 951, Fireplace, "Fireplace"],
        [1957, 1733, Fireplace, "Fireplace"],
        [1962, 1728, Fireplace, "Fireplace"],
        [1966, 945, Fireplace, "Fireplace"],
        [1969, 1748, Fireplace, "Fireplace"],
        [473, 1176, Fireplace, "Fireplace"],
        [1023, 1504, Down, "Bat Cave"]
    ];
    flag[1] = [
        [1096, 1441, Up, "Outside Mirith behind Castle"],
        [2173, 1209, Up, "Exit 'New' Cave"],
        [1955, 1757, Up, "Exit Sewers"],
        [1365, 364, Up, "Marali Fort Forge-Room"],
        [1113, 1458, Up, "Mirith Castle"],
        [1113, 921, Up, "Exit Cave Dungeon"],
        [1118, 1437, Down, "Mirith Sewers"],
        [1167, 1440, Down, "Mirith Sewers"],
        [1255, 1591, Up, "Exit to Mirith Cemetary"],
        [1262, 1611, Down, "Crypt Dungeon Level 2"],
        [1481, 2317, Up, "Exit to Skull Island"],
        [1494, 557, Up, "Exit to Aborek"],
        [1515, 574, Down, "Aborek Dungeon Level 2"],
        [1952, 1035, SmChest, "Treasure Chest (50-60gp)"],
        [1954, 1052, Down, "Queen's Chamber"],
        [1983, 1028, SmChest, "Treasure Chest (100-120gp)"],
        [1985, 986, SmChest, "Treasure Chest (40-100gp, sometimes Crystal Ring)"],
        [1985, 1018, Up, "Exit Anthill"],
        [2009, 962, SmChest, "Treasure Chest (100-125gp)"],
        [1004, 1001, SmChest, "Treasure Chest"],
        [1005, 1001, SmChest, "Treasure Chest"],
        [1007, 972, SmChest, "Treasure Chest"],
        [768, 1080, Jail, "Jail"],
        [775, 1072, Jail, "Jail"],
        [994, 985, SmChest, "Treasure Chest"],
        [997, 967, SmChest, "Treasure Chest"],
        [1365, 402, SmChest, "Treasure Chest (23gp, 1 red crystal, 4 bottles of poison)"],
        [1357, 395, SmChest, "Treasure Chest (100gp)"],
        [1351, 367, SmChest, "Treasure Chest (13gp, 5 red crystals)"],
        [1377, 377, SmChest, "Treasure Chest (65gp, 5 LHPs)"],
        [1371, 402, SmChest, "Treasure Chest (54gp, 1 nourish potion)"],
        [1395, 388, SmChest, "Treasure Chest (75gp, 2 red crystals)"],
        [1352, 374, SmChest, "Treasure Chest (107gp)"],
        [2229, 1340, Up, "Exit Volcano Dungeon"],
        [2241, 1320, Down, "Volcano Dungeon Level 2"],
        [124, 1350, Up, "Exit Ice Dungeon"],
        [748, 1064, Up, "Exit 'Unidentified' Dungeon"],
        [879, 1711, Up, "Lizard Man's Island"],
        [1000, 1471, Up, "Mainland"],
        [977, 958, Up, "Exit Tree Maze Dungeon"],
        [1023, 1504, Up, "Exit Batcave"]
    ];
    flag[2] = [
        [1118, 1437, Up, "Chucky's Hallway"],
        [1167, 1440, Up, "Exit Sewers (Up 2 Levels)"],
        [1183, 1467, Down, "Zombie's Chamber"],
        [1262, 1611, Up, "Crypt Dungeon Level 1"],
        [1515, 574, Up, "Aborek Dungeon Level 1"],
        [1520, 603, Down, "Aborek Dungeon Level 3"],
        [1269, 1595, Jail, "Jail"],
        [1272, 1591, Jail, "Jail"],
        [1276, 1588, Jail, "Jail"],
        [1268, 1608, Jail, "Jail"],
        [1272, 1605, Jail, "Jail"],
        [1275, 1601, Jail, "Jail"],
        [1279, 1598, Jail, "Jail"],
        [1282, 1594, Jail, "Jail"],
        [1935, 1053, SmChest, "Treasure Chest (~500gp, sometimes rings?)"],
        [1942, 1045, SmChest, "Treasure Chest (~300gp, sometimes diamonds)"],
        [1127, 1438, SmChest, "Treasure Chest"],
        [1132, 1422, SmChest, "Treasure Chest"],
        [1137, 1442, SmChest, "Treasure Chest"],
        [1152, 1414, SmChest, "Treasure Chest"],
        [1157, 1427, SmChest, "Treasure Chest"],
        [1159, 1463, SmChest, "Treasure Chest"],
        [1197, 1453, SmChest, "Treasure Chest"],
        [1954, 1052, Up, "Anthill"],
        [2241, 1320, Up, "Volcano Dungeon Level 1"]
    ];
    flag[3] = [
        [1183, 1467, Up, "Mirith Sewers"],
        [1520, 603, Up, "Aborek Dungeon Level 2"],
        [1185, 1474, SmChest, "Treasure Chest"],
        [1186, 1473, SmChest, "Treasure Chest"],
        [1547, 596, Down, "Aborek Dungeon Level 4"]
    ];
    flag[4] = [
        [1547, 596, Up, "Aborek Dungeon Level 3"],
        [1556, 618, Down, "Aborek Dungeon Level 5"]
    ];
    flag[5] = [
        [1542, 659, Down, "Aborek Dungeon Level 6"],
        [1556, 618, Up, "Aborek Dungeon Level 4"]
    ];
    flag[6] = [
        [1542, 659, Up, "Aborek Dungeon Level 5"],
        [1554, 656, Down, "Aborek Dungeon Level 7"]
    ];
    flag[7] = [
        [1554, 656, Up, "Aborek Dungeon Level 6"],
        [1570, 661, Down, "Aborek Dungeon Level 8"]
    ];
    flag[8] = [
        [1566, 654, Down, "Aborek Dungeon Level 9"],
        [1570, 661, Up, "Aborek Dungeon Level 7"]
    ];
    flag[9] = [
        [1566, 654, Up, "Aborek Dungeon Level 8"],
        [1569, 627, Down, "Aborek Dungeon Level 10"]
    ];
    flag[10] = [
        [1569, 627, Up, "Aborek Dungeon Level 9"],
        [1581, 646, "unknown", " The 'Silver Leaf' Portal"]
    ];
    // -->
</script>

<script type="text/javascript">
    // <!--
    /* This notice must be untouched at all times.

wz_dragdrop.js	v. 4.85
The latest version is available at
http://www.walterzorn.com
or http://www.devira.com
or http://www.walterzorn.de

Copyright (c) 2002-2003 Walter Zorn. All rights reserved.
Created 26. 8. 2002 by Walter Zorn (Web: http://www.walterzorn.com )
Last modified: 10. 2. 2006

This DHTML & Drag&Drop Library adds Drag&Drop functionality
to the following types of html-elements:
- images, even if not positioned via layers,
  nor via stylesheets or any other kind of "hard-coding"
- relatively and absolutely positioned layers (DIV elements).
Moreover, it provides extended DHTML abilities.

LICENSE: LGPL

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License (LGPL) as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

For more details on the GNU Lesser General Public License,
see http://www.gnu.org/copyleft/lesser.html
*/


    // PATH TO THE TRANSPARENT 1*1 PX IMAGE (required by NS 4 as spacer)
    var spacer = './trans.gif';

    var cellX = -1;
    var cellY = -1;
    var magLevel = 1;
    var groundLevel = 0;
    var offsetX = -16;
    var offsetY = -16;
    var imagesLoaded = 0;
    var fromX = 0;
    var fromY = 0;
    var root2 = 1.4142;
    var xmin;
    var ymin;
    var xrange;
    var yrange;

    //window.onerror = new Function('return true;');


    // Optional commands passed to SET_DHTML() on the html-page (g: may be applied globally, i: individually)
    var CLONE = 'C10nE';   // i  img	  clone image
    var COPY = 'C0pY';	// i  img	  create copies
    var DETACH_CHILDREN = 'd37aCH';  // i  lyr	  detach images
    var HORIZONTAL = 'H0r1Z';   // i  img,lyr  horizontally draggable only
    var MAXHEIGHT = 'm7x8I';   // i  img,lyr  maximum height limit, "
    var MAXOFFBOTTOM = 'm7xd0wN'; // i  img,lyr  downward offset limit
    var MAXOFFLEFT = 'm7x23Ft'; // i  img,lyr  leftward offset limit
    var MAXOFFRIGHT = 'm7x0Ff8'; // i  img,lyr  rightward offset limit
    var MAXOFFTOP = 'm7xu9';   // i  img,lyr  upward offset limit
    var MAXWIDTH = 'm7xW1';   // i  img,lyr  maximum width limit, use with resizable or scalable
    var MINWIDTH = 'm1nw1';   // i  img,lyr  minimum width limit, "
    var MINHEIGHT = 'm1n8I';   // i  img,lyr  minimum height limit, "
    var NO_ALT = 'no81T';   // gi img	  disable alt and title attributes
    var NO_DRAG = 'N0d4Ag';  // i  img,lyr  disable draggability
    var RESET_Z = 'r35E7z';  // gi img,lyr  reset z-index when dropped
    var RESIZABLE = 'r5IZbl';  // gi img,lyr  resizable if <ctrl> or <shift> pressed
    var SCALABLE = 'SCLbl';   // gi img,lyr  scalable		   "
    var SCROLL = 'sC8lL';   // gi img,lyr  enable auto scroll functionality
    var TRANSPARENT = 'dIApHAn'; // gi img,lyr  translucent while dragged
    var VERTICAL = 'V3Rt1C';  // i  img,lyr  vertically draggable only
    var dd_cursors = ['c:default',
        'c:crosshair',
        'c:e-resize',
        'c:hand',
        'c:help',
        'c:move',
        'c:n-resize',
        'c:ne-resize',
        'c:nw-resize',
        'c:s-resize',
        'c:se-resize',
        'c:sw-resize',
        'c:text',
        'c:w-resize',
        'c:wait'];
    var dd_i = dd_cursors.length;

    //TODO: - unused variable CURSOR_
    while (dd_i--)
        eval('var CURSOR_' + (dd_cursors[dd_i].substring(2).toUpperCase().replace('-', '_')) + ' = "' + dd_cursors[dd_i] + '";');
    var dd_u = "undefined";

    function WZDD() {
        this.elements = new Array(0);
        this.obj = null;
        this.n = navigator.userAgent.toLowerCase();
        this.db = (document.compatMode && document.compatMode.toLowerCase() !== "backcompat") ?
            document.documentElement
            : (document.body || null);
        //TODO: - unresolved variable .opera
        this.op = !!(window.opera && document.getElementById);
        if (this.op) document.onmousedown = new Function('e',
            'if(((e = e || window.event).target || e.srcElement).tagName == "IMAGE") return false;');
        this.ie = !!(this.n.indexOf("msie") >= 0 && document.all && this.db && !this.op);
        this.iemac = !!(this.ie && this.n.indexOf("mac") >= 0);
        this.ie4 = !!(this.ie && !document.getElementById);
        //TODO: - unresolved variables .layers .classes
        this.n4 = !!(document.layers && typeof document.classes !== dd_u);
        this.n6 = !!(typeof window.getComputedStyle !== dd_u && typeof document.createRange !== dd_u);
        this.w3c = !!(!this.op && !this.ie && !this.n6 && document.getElementById);
        this.ce = !!(document.captureEvents && document.releaseEvents);
        this.px = this.n4 ? '' : 'px';
        this.tiv = this.w3c ? 40 : 10;
    }

    var dd = new WZDD();

    dd.Int = function (d_x, d_y) {
        return isNaN(d_y = parseInt(d_x)) ? 0 : d_y;
    };
    dd.getWndW = function () {
        return dd.Int(
            (dd.db && !dd.op && !dd.w3c && dd.db.clientWidth) ? dd.db.clientWidth
                : (window.innerWidth || 0)
        );
    };
    dd.getWndH = function () {
        return dd.Int(
            (dd.db && !dd.op && !dd.w3c && dd.db.clientHeight) ? dd.db.clientHeight
                : (window.innerHeight || 0)
        );
    };
    dd.getScrollX = function () {
        return dd.Int(window.pageXOffset || (dd.db ? dd.db.scrollLeft : 0));
    };
    dd.getScrollY = function () {
        return dd.Int(window.pageYOffset || (dd.db ? dd.db.scrollTop : 0));
    };
    dd.getPageXY = function (d_o) {
        if (dd.n4 && d_o) {
            dd.x = d_o.pageX || 0;
            dd.y = d_o.pageY || 0;
        } else {
            dd.x = dd.y = 0; //global helper vars
            while (d_o) {
                dd.x += dd.Int(d_o.offsetLeft);
                dd.y += dd.Int(d_o.offsetTop);
                d_o = d_o.offsetParent || null;
            }
        }
    };
    dd.getCssXY = function (d_o) {
        if (d_o.div) {
            if (dd.n4) {
                d_o.cssx = d_o.div.x;
                d_o.cssy = d_o.div.y;
            } else if (dd.ie4) {
                d_o.cssx = d_o.css.pixelLeft;
                d_o.cssy = d_o.css.pixelTop;
            } else {
                d_o.css.left = d_o.css.top = 0 + dd.px;
                dd.getPageXY(d_o.div);
                d_o.cssx = d_o.x - dd.x;
                d_o.cssy = d_o.y - dd.y;
                d_o.css.left = d_o.cssx + dd.px;
                d_o.css.top = d_o.cssy + dd.px;
            }
        } else {
            d_o.cssx = 0;
            d_o.cssy = 0;
        }
    };
    dd.getImgW = function (d_o) {
        return d_o ? dd.Int(d_o.width) : 0;
    };
    dd.getImgH = function (d_o) {
        return d_o ? dd.Int(d_o.height) : 0;
    };
    dd.getDivW = function (d_o) {
        return dd.Int(
            dd.n4 ? (d_o.div ? d_o.div.clip.width : 0)
                : d_o.div ? (d_o.div.offsetWidth || d_o.css.pixelWidth || d_o.css.width || 0)
                : 0
        );
    };
    dd.getDivH = function (d_o) {
        return dd.Int(
            dd.n4 ? (d_o.div ? d_o.div.clip.height : 0)
                : d_o.div ? (d_o.div.offsetHeight || d_o.css.pixelHeight || d_o.css.height || 0)
                : 0
        );
    };
    dd.getWH = function (d_o) {
        d_o.w = dd.getDivW(d_o);
        d_o.h = dd.getDivH(d_o);
        if (d_o.css) {
            d_o.css.width = d_o.w + dd.px;
            d_o.css.height = d_o.h + dd.px;
            d_o.dw = dd.getDivW(d_o) - d_o.w;
            d_o.dh = dd.getDivH(d_o) - d_o.h;
            d_o.css.width = (d_o.w - d_o.dw) + dd.px;
            d_o.css.height = (d_o.h - d_o.dh) + dd.px;
        } else d_o.dw = d_o.dh = 0;
    };
    dd.getCssProp = function (d_o, d_pn6, d_pstyle, d_pn4) {
        if (d_o && dd.n6) return '' + window.getComputedStyle(d_o, null).getPropertyValue(d_pn6);
        if (d_o && d_o.currentStyle) return '' + eval('d_o.currentStyle.' + d_pstyle);
        if (d_o && d_o.style) return '' + eval('d_o.style.' + d_pstyle);
        if (d_o && dd.n4) return '' + eval('d_o.' + d_pn4);
        return '';
    };
    dd.getDiv = function (d_x, d_d) {
        d_d = d_d || document;
        if (dd.n4) {
            if (d_d.layers[d_x]) return d_d.layers[d_x];
            for (var d_i = d_d.layers.length; d_i--;) {
                var d_y = dd.getDiv(d_x, d_d.layers[d_i].document);
                if (d_y) return d_y;
            }
        }
        if (dd.ie) return d_d.all[d_x] || null;
        if (d_d.getElementById) return d_d.getElementById(d_x) || null;
        return null;
    };
    dd.getImg = function (d_o, d_nm, d_xy, d_w) {
        d_w = d_w || window;
        var d_img;
        if (document.images && (d_img = d_w.document.images[d_nm])) {
            if (d_xy) {
                if (dd.n4) {
                    dd.getPageXY(d_w);
                    d_o.defx = d_img.x + dd.x;
                    d_o.defy = d_img.y + dd.y;
                } else {
                    dd.getPageXY(d_img);
                    d_o.defx = dd.x;
                    d_o.defy = dd.y;
                }
            }
            return d_img;
        }
        if (dd.n4) for (var d_i = d_w.document.layers.length; d_i--;) {
            var d_y = dd.getImg(d_o, d_nm, d_xy, d_w.document.layers[d_i]);
            if (d_y) return d_y;
        }
        return null;
    };
    dd.getParent = function (d_o, d_p) {
        if (dd.n4) {
            for (d_p, d_i = dd.elements.length; d_i--;) {
                if (!((d_p = dd.elements[d_i]).is_image) && d_p.div && (d_p.div.document.layers[d_o.name] || d_o.oimg && d_p.div.document.images[d_o.oimg.name]))
                    d_p.addChild(d_o, d_p.detach, 1);
            }
        } else {
            d_p = d_o.is_image ? dd.getImg(d_o, d_o.oimg.name) : (d_o.div || null);
            while (d_p && !!(d_p = d_p.offsetParent || d_p.parentNode || null)) {
                if (d_p.ddObj) {
                    d_p.ddObj.addChild(d_o, d_p.ddObj.detach, 1);
                    break;
                }
            }
        }
    };
    dd.getCmd = function (d_o, d_cmd, d_cmdStr) {
        var d_i = d_o.id.indexOf(d_cmd), d_j,
            d_y = (d_i >= 0) * 1;
        if (d_y) {
            d_j = d_i + d_cmd.length;
            if (d_cmdStr) d_o.cmd += d_o.id.substring(d_i, d_j);
            d_o.id = d_o.id.substring(0, d_i) + d_o.id.substring(d_j);
        }
        return d_y;
    };
    dd.getCmdVal = function (d_o, d_cmd, d_cmdStr, int0) {
        var d_i = d_o.id.indexOf(d_cmd), d_j,
            d_y = (d_o.id.indexOf(d_cmd) >= 0) ? dd.Int(d_o.id.substring(d_o.id.indexOf(d_cmd) + d_cmd.length)) : int0 ? -1 : 0;
        if (!int0 && d_y || int0 && d_y >= 0) {
            d_j = d_i + d_cmd.length + ("" + d_y).length;
            if (d_cmdStr) d_o.cmd += d_o.id.substring(d_i, d_j);
            d_o.id = d_o.id.substring(0, d_i) + d_o.id.substring(d_j);
        }
        return d_y;
    };
    dd.addElt = function (d_o, d_p) {
        dd.elements[d_o.name] = dd.elements[d_o.index = dd.elements.length] = d_o;
        if (d_p) d_p.copies[d_o.name] = d_p.copies[d_p.copies.length] = d_o;
    };
    dd.mkWzDom = function () {
        var d_o, d_i = dd.elements.length;
        while (d_i--) dd.getParent(dd.elements[d_i]);
        d_i = dd.elements.length;
        while (d_i--) {
            d_o = dd.elements[d_i];
            if (d_o.children && !d_o.parent) {
                var d_j = d_o.children.length;
                while (d_j--)
                    d_o.children[d_j].setZ(d_o.z + d_o.children[d_j].z, 1);
            }
        }
    };
    dd.addProps = function (d_o) {
        var d_i, d_c;
        if (d_o.is_image) {
            d_o.div = dd.getDiv(d_o.id);
            d_o.css = (d_o.div && typeof d_o.div.style !== dd_u) ? d_o.div.style : null;
            d_o.nimg = (dd.n4 && d_o.div) ? d_o.div.document.images[0] : (document.images[d_o.id + "NI1m6G"] || null);
            if (!d_o.noalt && !dd.noalt && d_o.nimg && d_o.oimg) {
                d_o.nimg.alt = d_o.oimg.alt || '';
                if (d_o.oimg.title) d_o.nimg.title = d_o.oimg.title;
            }
            d_o.bgColor = '';
        } else {
            d_o.bgColor = dd.getCssProp(d_o.div, 'background-color', 'backgroundColor', 'bgColor').toLowerCase();
            if (dd.n6 && d_o.div) {
                if ((d_c = d_o.bgColor).indexOf('rgb') >= 0) {
                    d_c = d_c.substring(4, d_c.length - 1).split(',');
                    d_o.bgColor = '#';
                    for (d_i = 0; d_i < d_c.length; d_i++) d_o.bgColor += parseInt(d_c[d_i]).toString(0x10);
                } else d_o.bgColor = d_c;
            }
        }
        if (dd.scalable) d_o.scalable = d_o.resizable ^ 1;
        else if (dd.resizable) d_o.resizable = d_o.scalable ^ 1;
        d_o.setZ(d_o.defz);
        d_o.cursor = d_o.cursor || dd.cursor || 'auto';
        d_o._setCrs(d_o.nodrag ? 'auto' : d_o.cursor);
        d_o.diaphan = d_o.diaphan || dd.diaphan || 0;
        d_o.opacity = 1.0;
        d_o.visible = true;
    };
    dd.initz = function () {
        if (!(dd && (dd.n4 || dd.n6 || dd.ie || dd.op || dd.w3c))) return;
        else if (dd.n6 || dd.ie || dd.op || dd.w3c) dd.recalc(1);
        var d_drag = (document.onmousemove === DRAG),
            d_resize = (document.onmousemove === RESIZE);
        if (dd.loadFunc) dd.loadFunc();
        if (d_drag) dd.setMovHdl(DRAG);
        else if (d_resize) dd.setMovHdl(RESIZE);
        if (d_drag || d_resize) dd.setUpHdl(DROP);
        dd.setDwnHdl(PICK);
    };
    dd.finlz = function () {
        if (dd.ie && dd.elements) {
            var d_i = dd.elements.length;
            while (d_i--)
                dd.elements[d_i].del();
        }
        if (dd.uloadFunc) dd.uloadFunc();
    };
    dd.setCe = function (d_e, d_fnc) {
        d_fnc ? document.captureEvents(d_e) : document.releaseEvents(d_e);
    };
    dd.setDwnHdl = function (d_x) {
        if (document.onmousedown !== d_x) {
            dd.downFunc = document.onmousedown;
            document.onmousedown = d_x;
            if (dd.ce) dd.setCe(Event.MOUSEDOWN, d_x);
        }
    };
    dd.setMovHdl = function (d_x) {
        if (document.onmousemove !== d_x) {
            dd.moveFunc = document.onmousemove;
            document.onmousemove = d_x;
            if (dd.ce) dd.setCe(Event.MOUSEMOVE, d_x);
        }
    };
    dd.setUpHdl = function (d_x) {
        if (document.onmouseup !== d_x) {
            dd.upFunc = document.onmouseup;
            document.onmouseup = d_x;
            if (dd.ce) dd.setCe(Event.MOUSEUP, d_x);
        }
    };
    dd.evt = function (d_e) {
        this.but = (this.e = d_e || window.event).which || this.e.button || 0;
        this.button = (this.e.type === 'mousedown') ? this.but
            : (dd.e && dd.e.button) ? dd.e.button
                : 0;
        this.src = this.e.target || this.e.srcElement || null;
        this.src.tag = ("" + (this.src.tagName || this.src)).toLowerCase();
        this.x = dd.Int(this.e.pageX || this.e.clientX || 0);
        this.y = dd.Int(this.e.pageY || this.e.clientY || 0);
        if (dd.ie) {
            this.x += dd.getScrollX() - (dd.ie && !dd.iemac) * 1;
            this.y += dd.getScrollY() - (dd.ie && !dd.iemac) * 1;
        }
        this.modifKey = this.e.modifiers ? this.e.modifiers && Event.SHIFT_MASK : (this.e.shiftKey || false);
    };
    dd.getEventTarget = function (d_e, d_s, d_n) {
        d_e = d_e || window.event;
        if (d_e && (d_s = d_e.target || d_e.srcElement || null) != null) {
            if (null != (d_n = d_s.id || d_s.name || null)) {
                if (d_n.indexOf("dIi15vNI1m6G") === d_n.length - 12)
                    return dd.elements[d_n.substring(0, d_n.length - 12)] || null;
                if (d_n.indexOf("dIi15v") === d_n.length - 6)
                    return dd.elements[d_n.substring(0, d_n.length - 6)] || null;
                return dd.elements[d_n] || null;
            }
        }
        return null;
    };
    dd.recalc = function (d_x) {
        var d_o, d_i = dd.elements.length;
        while (d_i--) {
            if (!(d_o = dd.elements[d_i]).is_image && d_o.div) {
                dd.getWH(d_o);
                if (d_o.div.pos_rel) {
                    dd.getPageXY(d_o.div);
                    var d_dx = dd.x - d_o.x, d_dy = dd.y - d_o.y;
                    d_o.defx += d_dx;
                    d_o.x += d_dx;
                    d_o.defy += d_dy;
                    d_o.y += d_dy;
                    var d_p, d_j = d_o.children.length;
                    while (d_j--) {
                        if (!(d_p = d_o.children[d_j]).detached && (d_o !== d_p.defparent || !(d_p.is_image && dd.getImg(d_p, d_p.oimg.name, 1)))) {
                            d_p.defx += d_dx;
                            d_p.defy += d_dy;
                            d_p.moveBy(d_dx, d_dy);
                        }
                    }
                }
            } else if (d_o.is_image && !dd.n4) {
                if (dd.n6 && d_x && !d_o.defw) d_o.resizeTo(d_o.defw = dd.getImgW(d_o.oimg), d_o.defh = dd.getImgH(d_o.oimg));
                var d_defx = d_o.defx, d_defy = d_o.defy;
                if (!(d_o.parent && d_o.parent !== d_o.defparent) && (d_x || !d_o.detached || d_o.horizontal || d_o.vertical) && dd.getImg(d_o, d_o.oimg.name, 1))
                    d_o.moveBy(d_o.defx - d_defx, d_o.defy - d_defy);
            }
        }
    };

    function WINSZ(d_x) {
        if (d_x) {
            if (dd.n4) {
                dd.iW = innerWidth;
                dd.iH = innerHeight;
            }
            window.onresize = new Function('WINSZ();');
        } else if (dd.n4 && (innerWidth !== dd.iW || innerHeight !== dd.iH)) location.reload();
        else if (!dd.n4) setTimeout('dd.recalc()', 0xa);
    }

    WINSZ(1);

    function DDObj(d_o, d_i) {
        this.id = d_o;
        this.cmd = '';
        this.cpy_n = dd.getCmdVal(this, COPY);
        this.maxoffb = dd.getCmdVal(this, MAXOFFBOTTOM, 0, 1);
        this.maxoffl = dd.getCmdVal(this, MAXOFFLEFT, 0, 1);
        this.maxoffr = dd.getCmdVal(this, MAXOFFRIGHT, 0, 1);
        this.maxofft = dd.getCmdVal(this, MAXOFFTOP, 0, 1);
        var d_j = dd_cursors.length;
        while (d_j--)
            if (dd.getCmd(this, dd_cursors[d_j], 1)) this.cursor = dd_cursors[d_j].substring(2);
        this.clone = dd.getCmd(this, CLONE, 1);
        this.detach = dd.getCmd(this, DETACH_CHILDREN);
        this.scalable = dd.getCmd(this, SCALABLE, 1);
        this.horizontal = dd.getCmd(this, HORIZONTAL);
        this.noalt = dd.getCmd(this, NO_ALT, 1);
        this.nodrag = dd.getCmd(this, NO_DRAG);
        this.scroll = dd.getCmd(this, SCROLL, 1);
        this.resizable = dd.getCmd(this, RESIZABLE, 1);
        this.re_z = dd.getCmd(this, RESET_Z, 1);
        this.diaphan = dd.getCmd(this, TRANSPARENT, 1);
        this.vertical = dd.getCmd(this, VERTICAL);
        this.maxw = dd.getCmdVal(this, MAXWIDTH, 1, 1);
        this.minw = Math.abs(dd.getCmdVal(this, MINWIDTH, 1, 1));
        this.maxh = dd.getCmdVal(this, MAXHEIGHT, 1, 1);
        this.minh = Math.abs(dd.getCmdVal(this, MINHEIGHT, 1, 1));
        this.pickFunc = this.dragFunc = this.resizeFunc = this.dropFunc = null;

        this.name = this.id + (d_i || '');
        this.oimg = dd.getImg(this, this.id, 1);
        this.is_image = !!this.oimg;
        this.copies = [];
        this.children = [];
        this.parent = this.original = null;
        if (this.oimg) {
            this.id = this.name + "dIi15v";
            this.w = dd.getImgW(this.oimg);
            this.h = dd.getImgH(this.oimg);
            this.dw = this.dh = 0;
            this.defz = dd.Int(dd.getCssProp(this.oimg, 'z-index', 'zIndex', 'zIndex')) || 1;
            this.defsrc = this.src = this.oimg.src;
            this.htm = '<img name="' + this.id + 'NI1m6G"' +
                ' src="' + this.oimg.src + '" ' +
                'width="' + this.w + '" height="' + this.h + '">';
            this.t_htm = '<div id="' + this.id +
                '" style="position:absolute;' +
                'left:' + (this.cssx = this.x = this.defx) + 'px;' +
                'top:' + (this.cssy = this.y = this.defy) + 'px;' +
                'width:' + this.w + 'px;' +
                'height:' + this.h + 'px;">' +
                this.htm + '</div>';
        } else {
            if (!!(this.div = dd.getDiv(this.id)) && typeof this.div.style !== dd_u) this.css = this.div.style;
            dd.getWH(this);
            if (this.div) {
                this.div.ddObj = this;
                this.div.pos_rel = ("" + (this.div.parentNode ? this.div.parentNode.tagName : this.div.parentElement ? this.div.parentElement.tagName : '').toLowerCase().indexOf('body') < 0);
            }
            dd.getPageXY(this.div);
            this.defx = this.x = dd.x;
            this.defy = this.y = dd.y;
            dd.getCssXY(this);
            this.defz = dd.Int(dd.getCssProp(this.div, 'z-index', 'zIndex', 'zIndex'));
        }
        this.defw = this.w || 0;
        this.defh = this.h || 0;
    }

    DDObj.prototype.setPickFunc = function (d_x) {
        this.pickFunc = d_x;
    };

    //TODO: -unused definition .setDragFunc
    DDObj.prototype.setDragFunc = function (d_x) {
        this.dragFunc = d_x;
    };
    DDObj.prototype.setResizeFunc = function (d_x) {
        this.resizeFunc = d_x;
    };

    //TODO: -unused definition .setDropFunc
    DDObj.prototype.setDropFunc = function (d_x) {
        this.dropFunc = d_x;
    };
    DDObj.prototype.moveBy = function (d_x, d_y, d_kds, d_o) {
        if (!this.div) return;
        this.x += (d_x = dd.Int(d_x));
        this.y += (d_y = dd.Int(d_y));
        if (!d_kds || this.is_image || this.parent !== this.defparent) {
            (d_o = this.css || this.div).left = (this.cssx += d_x) + dd.px;
            d_o.top = (this.cssy += d_y) + dd.px;
        }
        var d_i = this.children.length;
        while (d_i--) {
            if (!(d_o = this.children[d_i]).detached) d_o.moveBy(d_x, d_y, 1);
            d_o.defx += d_x;
            d_o.defy += d_y;
        }
    };
    DDObj.prototype.moveTo = function (d_x, d_y) {
        this.moveBy(dd.Int(d_x) - this.x, dd.Int(d_y) - this.y);
    };
    DDObj.prototype.hide = function (d_m, d_o, d_p) {
        if (this.div && this.visible) {
            d_p = this.css || this.div;
            if (d_m && !dd.n4) {
                this.display = dd.getCssProp(this.div, "display", "display", "display");
                if (this.oimg) {
                    this.oimg.display = dd.getCssProp(this.oimg, "display", "display", "display");
                    this.oimg.style.display = "none";
                }
                d_p.display = "none";
                dd.recalc();
            } else d_p.visibility = "hidden";
        }
        this.visible = false;
        var d_i = this.children.length;
        while (d_i--)
            if (!(d_o = this.children[d_i]).detached) d_o.hide(d_m);
    };
    DDObj.prototype.show = function (d_o, d_p) {
        if (this.div) {
            d_p = this.css || this.div;
            if (d_p.display && d_p.display === "none") {
                d_p.display = this.display || "block";
                if (this.oimg) this.oimg.style.display = this.oimg.display || "inline";
                dd.recalc();
            } else d_p.visibility = "visible";
        }
        this.visible = true;
        var d_i = this.children.length;
        while (d_i--)
            if (!(d_o = this.children[d_i]).detached) d_o.show();
    };
    DDObj.prototype.resizeTo = function (d_w, d_h, d_o) {
        if (!this.div) return;
        d_w = (this.w = dd.Int(d_w)) - this.dw;
        d_h = (this.h = dd.Int(d_h)) - this.dh;
        if (dd.n4) {
            this.div.resizeTo(d_w, d_h);
            if (this.is_image) {
                this.write('<img src="' + this.src + '" width="' + d_w + '" height="' + d_h + '">');
                (this.nimg = this.div.document.images[0]).src = this.src;
            }
        } else if (typeof this.css.pixelWidth !== dd_u) {
            this.css.pixelWidth = d_w;
            this.css.pixelHeight = d_h;
            if (this.is_image) {
                (d_o = this.nimg.style).pixelWidth = d_w;
                d_o.pixelHeight = d_h;
            }
        } else {
            this.css.width = d_w + dd.px;
            this.css.height = d_h + dd.px;
            if (this.is_image) {
                (d_o = this.nimg).width = d_w;
                d_o.height = d_h;
                if (!d_o.complete) d_o.src = this.src;
            }
        }
    };
    DDObj.prototype.resizeBy = function (d_dw, d_dh) {
        this.resizeTo(this.w + dd.Int(d_dw), this.h + dd.Int(d_dh));
    };
    DDObj.prototype.swapImage = function (d_x, d_cp) {
        if (!this.nimg) return;
        this.nimg.src = d_x;
        this.src = this.nimg.src;
        if (d_cp) {
            var d_i = this.copies.length;
            while (d_i--)
                this.copies[d_i].src = this.copies[d_i].nimg.src = this.nimg.src;
        }
    };

    //TODO: - unused definition .setBgColor
    DDObj.prototype.setBgColor = function (d_x) {
        if (dd.n4 && this.div) this.div.bgColor = d_x;
        else if (this.css) this.css.background = d_x;
        this.bgColor = d_x;
    };
    DDObj.prototype.write = function (d_x, d_o) {
        this.text = d_x;
        if (!this.div) return;
        if (dd.n4) {
            (d_o = this.div.document).open();
            d_o.write(d_x);
            d_o.close();
            dd.getWH(this);
        } else {
            this.css.height = 'auto';
            this.div.innerHTML = d_x;
            if (!dd.ie4) dd.recalc();
            if (dd.ie4 || dd.n6) setTimeout('dd.recalc();', 0); // n6.0: recalc twice
        }
    };
    DDObj.prototype.copy = function (d_n, d_p, d_b) {
        if (!this.oimg) return;
        d_b = (dd.ie && document.all.tags('body')) ? document.all.tags('body')[0] : document.getElementsByTagName ? (document.getElementsByTagName('body')[0] || dd.db) : dd.db;
        d_n = d_n || 1;
        while (d_n--) {
            var d_l = this.copies.length,
                d_o = new DDObj(this.name + this.cmd, d_l + 1);
            if (dd.n4) {
                d_o.id = (d_p = new Layer(d_o.w)).name;
                d_p.clip.height = d_o.h;
                d_p.visibility = 'show';
                (d_p = d_p.document).open();
                d_p.write(d_o.htm);
                d_p.close();
            } else if (d_b && d_b.insertAdjacentHTML) d_b.insertAdjacentHTML("AfterBegin", d_o.t_htm);
            else if (document.createElement && d_b && d_b.appendChild) {
                d_b.appendChild(d_p = document.createElement("dIi15v"));
                d_p.innerHTML = d_o.htm;
                d_p.id = d_o.id;
                d_p.style.position = 'absolute';
                d_p.style.width = d_o.w + 'px';
                d_p.style.height = d_o.h + 'px';
            } else if (d_b && d_b.innerHTML) d_b.innerHTML += d_o.t_htm;
            d_o.defz = this.defz + 1 + d_l;
            dd.addProps(d_o);
            d_o.original = this;
            dd.addElt(d_o, this);
            if (this.parent) {
                this.parent.addChild(d_o, this.detached);
                d_o.defparent = this.defparent;
            }
            d_o.moveTo(d_o.defx = this.defx, d_o.defy = this.defy);
            if (dd.n4) d_o.defsrc = d_o.src = this.defsrc;
            d_o.swapImage(this.src);
        }
    };
    DDObj.prototype.addChild = function (d_kd, detach, defp) {
        if (typeof d_kd != "object") d_kd = dd.elements[d_kd];
        if (d_kd.parent && d_kd.parent === this || d_kd === this || !d_kd.is_image && d_kd.defparent && !defp) return;

        this.children[this.children.length] = this.children[d_kd.name] = d_kd;
        d_kd.detached = detach || 0;
        if (defp) d_kd.defparent = this;
        else if (this === d_kd.defparent && d_kd.is_image) dd.getImg(this, d_kd.oimg.name, 1);
        if (!d_kd.defparent || this !== d_kd.defparent) {
            d_kd.defx = d_kd.x;
            d_kd.defy = d_kd.y;
        }
        if (!detach) {
            d_kd.defz = d_kd.defz + this.defz - (d_kd.parent ? d_kd.parent.defz : 0) + (!d_kd.is_image * 1);
            d_kd.setZ(d_kd.z + this.z - (d_kd.parent ? d_kd.parent.z : 0) + (!d_kd.is_image * 1), 1);
        }
        if (d_kd.parent) d_kd.parent._removeChild(d_kd, 1);
        d_kd.parent = this;
    };
    DDObj.prototype._removeChild = function (d_kd, d_newp) {
        if (typeof d_kd != "object") d_kd = this.children[d_kd];
        var d_oc = this.children, d_nc = [];
        for (var d_i = 0; d_i < d_oc.length; d_i++)
            if (d_oc[d_i] !== d_kd) d_nc[d_nc.length] = d_oc[d_i];
        this.children = d_nc;
        d_kd.parent = null;
        if (!d_newp) {
            d_kd.detached = d_kd.defp = 0;
            if (d_kd.is_image) dd.getImg(d_kd, d_kd.oimg.name, 1);
        }
    };

    //TODO: - unused definition attachChild
    DDObj.prototype.attachChild = function (d_kd) {
        (d_kd = (typeof d_kd != "object") ? this.children[d_kd] : d_kd).detached = 0;
        d_kd.setZ(d_kd.defz + this.z - this.defz, 1);
    };

    //TODO: - value assigned to 'd_kd' is never used
    DDObj.prototype.detachChild = function (d_kd) {
        (d_kd = (typeof d_kd != "object") ? this.children[d_kd] : d_kd).detached = 1;
    };
    DDObj.prototype.setZ = function (d_x, d_kds, d_o) {
        if (d_kds) {
            var d_dz = d_x - this.z,
                d_i = this.children.length;
            while (d_i--)
                if (!(d_o = this.children[d_i]).detached) d_o.setZ(d_o.z + d_dz, 1);
        }
        dd.z = Math.max(dd.z, this.z = this.div ? ((this.css || this.div).zIndex = d_x) : 0);
    };
    DDObj.prototype.maximizeZ = function () {
        this.setZ(dd.z + 1, 1);
    };
    DDObj.prototype._resetZ = function (d_o) {
        if (this.re_z || dd.re_z) {
            this.setZ(this.defz);
            var d_i = this.children.length;
            while (d_i--)
                if (!(d_o = this.children[d_i]).detached) d_o.setZ(d_o.defz);
        }
    };

    //TODO: - unused definition .setOpacity
    DDObj.prototype.setOpacity = function (d_x) {
        this.opacity = d_x;
        this._setOpaRel(1.0, 1);
    };
    DDObj.prototype._setOpaRel = function (d_x, d_kd, d_y, d_o) {
        if (this.css && (this.diaphan || d_kd)) {
            d_y = this.opacity * d_x;
            if (typeof this.css.MozOpacity !== dd_u) this.css.MozOpacity = d_y;
            else if (typeof this.css.filter !== dd_u)
                this.css.filter = "Alpha(opacity=" + parseInt(100 * d_y) + ")";
            else this.css.opacity = d_y;
            var d_i = this.children.length;
            while (d_i--)
                if (!(d_o = this.children[d_i]).detached) d_o._setOpaRel(d_x, 1);
        }
    };
    DDObj.prototype.setCursor = function (d_x) {
        this._setCrs(this.cursor = (d_x.indexOf('c:') + 1) ? d_x.substring(2) : d_x);
    };
    DDObj.prototype._setCrs = function (d_x) {
        if (this.css) this.css.cursor = ((!dd.ie || dd.iemac) && d_x === 'hand') ? 'pointer' : d_x;
    };

    //TODO: - unused definition .setDraggable
    DDObj.prototype.setDraggable = function (d_x) {
        this.nodrag = !d_x * 1;
        this._setCrs(d_x ? this.cursor : 'auto');
    };
    DDObj.prototype.setResizable = function (d_x) {
        this.resizable = d_x * 1;
        if (d_x) this.scalable = 0;
    };
    DDObj.prototype.setScalable = function (d_x) {
        this.scalable = d_x * 1;
        if (d_x) this.resizable = 0;
    };

    //TODO: - unused definition getEltBelow
    DDObj.prototype.getEltBelow = function (d_ret, d_x, d_y) {
        var d_o, d_cmp = -1, d_i = dd.elements.length;
        while (d_i--) {
            d_o = dd.elements[d_i];
            d_x = d_o.x - this.w / 2;
            d_y = d_o.y - this.h / 2;
            if (d_o.visible && d_o.z < this.z && this.x >= d_x && this.x <= d_x + d_o.w && this.y >= d_y && this.y <= d_y + d_o.h) {
                if (d_o.z > d_cmp) {
                    d_cmp = d_o.z;
                    d_ret = d_o;
                }
            }
        }
        return d_ret;
    };
    DDObj.prototype.del = function (d_os, d_o) {
        var d_i;
        if (this.parent && this.parent._removeChild) this.parent._removeChild(this);
        if (this.original) {
            this.hide();
            if (this.original.copies) {
                d_os = [];
                for (d_i = 0; d_i < this.original.copies.length; d_i++)
                    if ((d_o = this.original.copies[d_i]) !== this) d_os[d_o.name] = d_os[d_os.length] = d_o;
                this.original.copies = d_os;
            }
        } else if (this.is_image) {
            this.hide();
            if (this.oimg) {
                if (dd.n4) this.oimg.src = this.defsrc;
                else this.oimg.style.visibility = 'visible';
            }
        } else if (this.moveTo) {
            if (this.css) this.css.cursor = 'default';
            this.moveTo(this.defx, this.defy);
            this.resizeTo(this.defw, this.defh);
        }
        d_os = [];
        for (d_i = 0; d_i < dd.elements.length; d_i++) {
            if ((d_o = dd.elements[d_i]) !== this) d_os[d_o.name] = d_os[d_o.index = d_os.length] = d_o;
            else d_o._free();
        }
        dd.elements = d_os;
        if (!dd.n4) dd.recalc();
    };

    // TODO: -refactor this[d_i] possible iteration over unexpected members -> hasOwnPropertyCheck?
    DDObj.prototype._free = function () {
        for (var d_i in this)
            this[d_i] = null;
        dd.elements[this.name] = null;
    };
    dd.n4RectVis = function (vis) {
        for (var d_i = 4; d_i--;) {
            dd.rectI[d_i].visibility = dd.rectA[d_i].visibility = vis ? 'show' : 'hide';
            if (vis) dd.rectI[d_i].zIndex = dd.rectA[d_i].zIndex = dd.z + 2;
        }
    };
    dd.n4RectPos = function (d_o, d_x, d_y, d_w, d_h) {
        d_o.x = d_x;
        d_o.y = d_y;
        d_o.clip.width = d_w;
        d_o.clip.height = d_h;
    };
    // NN4: Draw img sizing rect
    dd.n4Rect = function (d_w, d_h) {
        var d_i;
        if (!dd.rectI) {
            dd.rectI = [];
            dd.rectA = [];
        }
        if (!dd.rectI[0]) {
            for (d_i = 4; d_i--;) {
                (dd.rectI[d_i] = new Layer(1)).bgColor = '#000000';
                (dd.rectA[d_i] = new Layer(1)).bgColor = '#ffffff';
            }
        }
        if (!dd.rectI[0].visibility || dd.rectI[0].visibility === 'hide') dd.n4RectVis(1);
        dd.obj.w = d_w;
        dd.obj.h = d_h;
        for (d_i = 4; d_i--;) {
            dd.n4RectPos(dd.rectI[d_i], dd.obj.x + (!(d_i - 1) ? (dd.obj.w - 1) : 0), dd.obj.y + (!(d_i - 2) ? (dd.obj.h - 1) : 0), d_i & 1 || dd.obj.w, !(d_i & 1) || dd.obj.h);
            dd.n4RectPos(dd.rectA[d_i], !(d_i - 1) ? dd.rectI[1].x + 1 : (dd.obj.x - 1), !(d_i - 2) ? dd.rectI[2].y + 1 : (dd.obj.y - 1), d_i & 1 || dd.obj.w + 2, !(d_i & 1) || dd.obj.h + 2);
        }
    };
    dd.reszTo = function (d_w, d_h) {
        if (dd.n4 && dd.obj.is_image) dd.n4Rect(d_w, d_h);
        else dd.obj.resizeTo(d_w, d_h);
    };
    dd.embedVis = function (d_vis) {
        var d_o = ['iframe', 'applet', 'embed', 'object'];
        var d_i = d_o.length;
        while (d_i--) {
            var d_p = dd.ie ? document.all.tags(d_o[d_i]) : document.getElementsByTagName ? document.getElementsByTagName(d_o[d_i]) : null;
            if (d_p) {
                var d_j = d_p.length;
                while (d_j--) {
                    var d_q = d_p[d_j];
                    while (d_q.offsetParent || d_q.parentNode) {
                        if ((d_q = d_q.parentNode || d_q.offsetParent || null) === dd.obj.div) {
                            d_p[d_j].style.visibility = d_vis;
                            break;
                        }
                    }
                }
            }
        }
    };
    dd.maxOffX = function (d_x, d_y) {
        return (
            (dd.obj.maxoffl + 1 && (d_y = dd.obj.defx - dd.obj.maxoffl) - d_x > 0
                || dd.obj.maxoffr + 1 && (d_y = dd.obj.defx + dd.obj.maxoffr) - d_x < 0) ? d_y
                : d_x
        );
    };
    dd.maxOffY = function (d_x, d_y) {
        return (
            (dd.obj.maxofft + 1 && (d_y = dd.obj.defy - dd.obj.maxofft) - d_x > 0
                || dd.obj.maxoffb + 1 && (d_y = dd.obj.defy + dd.obj.maxoffb) - d_x < 0) ? d_y
                : d_x
        );
    };
    dd.inWndW = function (d_x, d_y) {
        var d_wx = dd.getScrollX(),
            d_ww = dd.getWndW();
        return (
            ((d_y = d_wx + 2) - d_x > 0) || ((d_y = d_wx + d_ww + dd.obj.w - 2) - d_x < 0) ? d_y
                : d_x
        );
    };
    dd.inWndH = function (d_x, d_y) {
        var d_wy = dd.getScrollY(),
            d_wh = dd.getWndH();
        return (
            ((d_y = d_wy + 2) - d_x > 0) || ((d_y = d_wy + d_wh + dd.obj.h - 2) - d_x < 0) ? d_y
                : d_x
        );
    };
    // These two funcs limit the size of element when mouseresized.
    // Implemented 22.5.2003 by Gregor Ltolf <gregor@milou.ch>, modified by Walter Zorn
    dd.limW = function (d_w) {
        return (
            (dd.obj.minw - d_w > 0) ? dd.obj.minw
                : (dd.obj.maxw > 0 && dd.obj.maxw - d_w < 0) ? dd.obj.maxw
                : d_w
        );
    };
    dd.limH = function (d_h) {
        return (
            (dd.obj.minh - d_h > 0) ? dd.obj.minh
                : (dd.obj.maxh > 0 && dd.obj.maxh - d_h < 0) ? dd.obj.maxh
                : d_h
        );
    };
    // Optional autoscroll-page functionality. Courtesy Cedric Savarese.
    // Implemented by Walter Zorn
    function DDScroll() {
        if (!dd.obj || !dd.obj.scroll && !dd.scroll || dd.ie4 || dd.whratio) {
            dd.scrx = dd.scry = 0;
            return;
        }
        var d_bnd = 0x1c,
            d_wx = dd.getScrollX(), d_wy = dd.getScrollY();
        if (dd.msmoved) {
            var d_ww = dd.getWndW(), d_wh = dd.getWndH(), d_y;
            dd.scrx = ((d_y = dd.e.x - d_ww - d_wx + d_bnd) > 0) ? (d_y >>= 2) * d_y
                : ((d_y = d_wx + d_bnd - dd.e.x) > 0) ? -(d_y >>= 2) * d_y
                    : 0;
            dd.scry = ((d_y = dd.e.y - d_wh - d_wy + d_bnd) > 0) ? (d_y >>= 2) * d_y
                : ((d_y = d_wy + d_bnd - dd.e.y) > 0) ? -(d_y >>= 2) * d_y
                    : 0;
        }
        if (dd.scrx || dd.scry) {
            window.scrollTo(
                d_wx + (dd.scrx = dd.obj.is_resized ? dd.limW(dd.obj.w + dd.scrx) - dd.obj.w : dd.obj.vertical ? 0 : (dd.maxOffX(dd.obj.x + dd.scrx) - dd.obj.x)),
                d_wy + (dd.scry = dd.obj.is_resized ? dd.limH(dd.obj.h + dd.scry) - dd.obj.h : dd.obj.horizontal ? 0 : (dd.maxOffY(dd.obj.y + dd.scry) - dd.obj.y))
            );
            dd.obj.is_dragged ? dd.obj.moveTo(dd.obj.x + dd.getScrollX() - d_wx, dd.obj.y + dd.getScrollY() - d_wy)
                : dd.reszTo(dd.obj.w + dd.getScrollX() - d_wx, dd.obj.h + dd.getScrollY() - d_wy);
        }
        dd.msmoved = 0;
        window.setTimeout('DDScroll()', 0x33);
    }

    function PICK(d_ev) {
        dd.e = new dd.evt(d_ev);
        if (dd.e.x >= dd.getWndW() + dd.getScrollX() || dd.e.y >= dd.getWndH() + dd.getScrollY()) return true; // on scrollbar
        var d_o, d_t, d_cmp = -1, d_i = dd.elements.length;
        while (d_i--) {
            d_o = dd.elements[d_i];
            if (dd.n4 && dd.e.but > 1 && dd.e.src === d_o.oimg && !d_o.clone) return false;
            if (d_o.visible && dd.e.but <= 1 && dd.e.x >= d_o.x && dd.e.x <= d_o.x + d_o.w && dd.e.y >= d_o.y && dd.e.y <= d_o.y + d_o.h) {
                if (d_o.z > d_cmp && (d_t = dd.e.src.tag).indexOf('inpu') < 0 && d_t.indexOf('texta') < 0 && d_t.indexOf('sele') < 0 && d_t.indexOf('opti') < 0 && d_t.indexOf('scrol') < 0) {
                    d_cmp = d_o.z;
                    dd.obj = d_o;
                }
            }
        }
        if (dd.obj) {
            if (dd.obj.nodrag) dd.obj = null;
            else {
                dd.e.e.cancelBubble = true;
                var d_rsz = dd.e.modifKey && (dd.obj.resizable || dd.obj.scalable);
                if (dd.op) {
                    (d_o = document.getElementById('OpBlUr')).style.pixelLeft = dd.e.x;
                    d_o.style.pixelTop = dd.e.y;
                    (d_o = d_o.children[0].children[0]).focus();
                    d_o.blur();
                } else if (dd.ie && !dd.ie4) {
                    if (document.selection && document.selection.empty) document.selection.empty();
                    dd.db.onselectstart = function () {
                        event.returnValue = false;
                    };
                }
                if (d_rsz) {
                    dd.obj._setCrs('se-resize');
                    dd.obj.is_resized = 1;
                    dd.whratio = dd.obj.scalable ? dd.obj.defw / dd.obj.defh : 0;
                    if (dd.ie) {
                        if (dd.ie4) {
                            window.dd_x = dd.getScrollX();
                            window.dd_y = dd.getScrollY();
                        }
                        setTimeout(
                            'if(dd.obj && document.selection && document.selection.empty)' +
                            '{' +
                            'document.selection.empty();' +
                            'if(dd.ie4) window.scrollTo(window.dd_x, window.dd_y);' +
                            '}'
                            , 0);
                    }
                    dd.setMovHdl(RESIZE);
                    dd.reszTo(dd.obj.w, dd.obj.h);
                } else {
                    dd.obj.is_dragged = 1;
                    dd.setMovHdl(DRAG);
                }
                dd.setUpHdl(DROP);
                dd.embedVis('hidden');
                dd.obj._setOpaRel(0.7);
                dd.obj.maximizeZ();
                dd.ofx = dd.obj.x + dd.obj.w - dd.e.x;
                dd.ofy = dd.obj.y + dd.obj.h - dd.e.y;
                if (window.my_PickFunc) my_PickFunc();
                if (dd.obj.pickFunc) dd.obj.pickFunc();
                DDScroll();
                return !(
                    dd.obj.is_resized
                    || dd.n4 && dd.obj.is_image
                    || dd.n6 || dd.w3c
                );
            }
        }
        if (dd.downFunc) return dd.downFunc(d_ev);
        return true;
    }

    function DRAG(d_ev) {
        if (!dd.obj || !dd.obj.visible) return true;
        if (dd.ie4 || dd.w3c || dd.n6 || dd.obj.children.length > 0xf) {
            if (dd.wait) return false;
            dd.wait = 1;
            setTimeout('dd.wait = 0;', dd.tiv);
        }
        dd.e = new dd.evt(d_ev);
        if (dd.ie && !dd.e.but) {
            DROP(d_ev);
            return true;
        }
        dd.msmoved = 1;
        dd.obj.moveTo(
            dd.obj.vertical ? dd.obj.x : dd.maxOffX(dd.inWndW(dd.ofx + dd.e.x) - dd.obj.w),
            dd.obj.horizontal ? dd.obj.y : dd.maxOffY(dd.inWndH(dd.ofy + dd.e.y) - dd.obj.h)
        );

        if (window.my_DragFunc) my_DragFunc();
        if (dd.obj.dragFunc) dd.obj.dragFunc();
        if (dd.moveFunc) return dd.moveFunc(d_ev);
        return false;
    }

    function RESIZE(d_ev) {
        if (!dd.obj || !dd.obj.visible) return true;
        if (dd.wait) return false;
        dd.wait = 1;
        setTimeout('dd.wait = 0;', dd.tiv);
        dd.e = new dd.evt(d_ev);
        if (dd.ie && !dd.e.but) {
            DROP(d_ev);
            return true;
        }
        dd.msmoved = 1;
        var d_w = dd.limW(dd.inWndW(dd.ofx + dd.e.x) - dd.obj.x), d_h;
        if (!dd.whratio) d_h = dd.limH(dd.inWndH(dd.ofy + dd.e.y) - dd.obj.y);
        else {
            d_h = dd.limH(dd.inWndH(Math.round(d_w / dd.whratio) + dd.obj.y) - dd.obj.y);
            d_w = Math.round(d_h * dd.whratio);
        }
        dd.reszTo(d_w, d_h);
        if (window.my_ResizeFunc) my_ResizeFunc();
        if (dd.obj.resizeFunc) dd.obj.resizeFunc();
        if (dd.moveFunc) return dd.moveFunc(d_ev);
        return false;
    }

    function DROP(d_ev) {
        if (dd.obj) {
            if (dd.obj.is_dragged) {
                if (!dd.obj.is_image) dd.getWH(dd.obj);
            } else if (dd.n4) {
                if (dd.obj.is_image) {
                    dd.n4RectVis(0);
                    dd.obj.resizeTo(dd.obj.w, dd.obj.h);
                }
            }
            if (!dd.n4 || !dd.obj.is_image) dd.recalc();
            dd.setMovHdl(dd.moveFunc);
            dd.setUpHdl(dd.upFunc);
            if (dd.db) dd.db.onselectstart = null;
            dd.obj._setOpaRel(1.0);
            dd.obj._setCrs(dd.obj.cursor);
            dd.embedVis('visible');
            dd.obj._resetZ();
            dd.e = new dd.evt(d_ev);
            if (window.my_DropFunc) my_DropFunc();
            if (dd.obj.dropFunc) dd.obj.dropFunc();
            dd.msmoved = dd.obj.is_dragged = dd.obj.is_resized = dd.whratio = 0;
            dd.obj = null;
        }
        dd.setDwnHdl(PICK);
    }

    function SET_DHTML() {
        var d_a = arguments, d_ai, d_htm = '', d_o, d_i = d_a.length;
        while (d_i--) {
            if (!(d_ai = d_a[d_i]).indexOf('c:')) dd.cursor = d_ai.substring(2);
            else if (d_ai === NO_ALT) dd.noalt = 1;
            else if (d_ai === SCROLL) dd.scroll = 1;
            else if (d_ai === RESET_Z) dd.re_z = 1;
            else if (d_ai === RESIZABLE) dd.resizable = 1;
            else if (d_ai === SCALABLE) dd.scalable = 1;
            else if (d_ai === TRANSPARENT) dd.diaphan = 1;
            else {
                d_o = new DDObj(d_ai);
                dd.addElt(d_o);
                d_htm += d_o.t_htm || '';
                if (d_o.oimg && d_o.cpy_n) {
                    var d_j = 0;
                    while (d_j < d_o.cpy_n) {
                        var d_p = new DDObj(d_o.name + d_o.cmd, ++d_j);
                        dd.addElt(d_p, d_o);
                        d_p.defz = d_o.defz + d_j;
                        d_p.original = d_o;
                        d_htm += d_p.t_htm;
                    }
                }
            }
        }
        if (dd.n4 || dd.n6 || dd.ie || dd.op || dd.w3c) document.write(
            (dd.n4 ? '<div style="position:absolute;"><\/div>\\n'
                : (dd.op && !dd.op6) ? '<div id="OpBlUr" style="position:absolute;visibility:hidden;width:0;height:0;"><form><input type="text" style="width:0;height:0;"><\/form><\/div>'
                    : '') + d_htm
        );
        dd.z = 0x33;
        d_i = dd.elements.length;
        while (d_i--) {
            dd.addProps(d_o = dd.elements[d_i]);
            if (d_o.is_image && !d_o.original && !d_o.clone)
                dd.n4 ? d_o.oimg.src = spacer : d_o.oimg.style.visibility = 'hidden';
        }
        dd.mkWzDom();
        if (window.onload) dd.loadFunc = window.onload;
        if (window.onunload) dd.uloadFunc = window.onunload;
        window.onload = dd.initz;
        window.onunload = dd.finlz;
        dd.setDwnHdl(PICK);
    }

    //TODO: - unused function ADD_DHTML
    function ADD_DHTML(d_o) { //Layers only!!!
        d_o = new DDObj(d_o);
        dd.addElt(d_o);
        dd.addProps(d_o);
        dd.mkWzDom();
    }


    // For backward compatibility
    dd.d = document;			// < v. 2.72
    var RESET_ZINDEX = RESET_Z; // < 3.44
    var KEYDOWN_RESIZE = RESIZABLE; // < 4.43
    var CURSOR_POINTER = CURSOR_HAND; // < 4.44
    var NO_SCROLL = '';		 // < v. 4.49

    ////////////////////////////////////////////////////////////
    // FUNCTIONS FOR EXTENDED SCRIPTING
    // Use these for your own extensions,
    // or to call functions defined elsewhere

    /* my_PickFunc IS AUTOMATICALLY CALLED WHEN AN ITEM STARTS TO BE DRAGGED.
The following objects/properties are accessible from here:

- dd.e: current mouse event
- dd.e.property: access to a property of the current mouse event.
  Mostly requested properties:
  - dd.e.x: document-related x co-ordinate
  - dd.e.y: document-related y co-ord
  - dd.e.src: target of mouse event (not identical with the drag drop object itself).
  - dd.e.button: currently pressed mouse button. Left button: dd.e.button <= 1

- dd.obj: reference to currently dragged item.
- dd.obj.property: access to any property of that item.
- dd.obj.method(): for example dd.obj.resizeTo() or dd.obj.swapImage() .
  Mostly requested properties:
	- dd.obj.name: image name or layer ID passed to SET_DHTML();
	- dd.obj.x and dd.obj.y: co-ordinates;
	- dd.obj.w and dd.obj.h: size;
	- dd.obj.is_dragged: 1 while item is dragged, else 0;
	- dd.obj.is_resized: 1 while item is resized, i.e. if <ctrl> or <shift> is pressed, else 0

For more properties and details, visit the API documentation
at http://www.walterzorn.com/dragdrop/api_e.htm (english) or
http://www.walterzorn.de/dragdrop/api.htm (german)	*/
    function my_PickFunc() {
        fromX = dd.obj.x;
        fromY = dd.obj.y;
    }

    /* my_DragFunc IS CALLED WHILE AN ITEM IS DRAGGED
See the description of my_PickFunc above for what's accessible from here. */
    function my_DragFunc() {
        var tempNE = getNE(cellX, cellY, offsetX + dd.obj.x - fromX,
            offsetY + dd.obj.y - fromY);

        var coordsbox = document.getElementById("coordsbox");
        coordsbox.removeChild(coordsbox.firstChild);
        coordsbox.appendChild(document.createTextNode(tempNE[0] + "N " +
            tempNE[1] + "E"));
    }

    /* my_ResizeFunc IS CALLED WHILE AN ITEM IS RESIZED
See the description of my_PickFunc above for what's accessible from here. */
    function my_ResizeFunc() {
    }

    /* THIS ONE IS CALLED ONCE AN ITEM IS DROPPED
See the description of my_PickFunc for what's accessible from here.
Here may be investigated, for example, what's the name (dd.obj.name)
of the dropped item, and where (dd.obj.x, dd.obj.y) it has been dropped... */
    function my_DropFunc() {
        if (dd.obj.x === fromX && dd.obj.y === fromY)
            return;

        clearImages();

        offsetX += (dd.obj.x - fromX);
        offsetY += (dd.obj.y - fromY);

        while (offsetX > 64) {
            cellX--;
            offsetX -= 128;
            dd.obj.moveBy(-128, 0);
        }
        while (offsetX < -64) {
            cellX++;
            offsetX += 128;
            dd.obj.moveBy(128, 0);
        }
        while (offsetY > 64) {
            cellY--;
            offsetY -= 128;
            dd.obj.moveBy(0, -128);
        }
        while (offsetY < -64) {
            cellY++;
            offsetY += 128;
            dd.obj.moveBy(0, 128);
        }

        loadImages();
    }

    //TODO: - duplicate declarations
    function clearImages() {
        var id_table = document.getElementById("mapgridinner");
        var myrows = id_table.getElementsByTagName("tr");
        imagesLoaded = -2 * myrows.length * myrows.length;
        var loadbox = document.getElementById("loadingbox");
        loadbox.style.overflow = "visible";

        var id_table = document.getElementById("mapgridinner");
        var myrows = id_table.getElementsByTagName("tr");

        for (var i = 0; i < myrows.length; i++) {
            var mycels = myrows[i].getElementsByTagName("td");
            for (var j = 0; j < mycels.length; j++) {
                mycels[j].getElementsByTagName("img")[0].src = './trans.gif';
            }
        }

        // remove all flags
        var mymap = document.getElementById("mapgrid");
        var allflags = mymap.childNodes;
        for (var i = 0; i < allflags.length; i++) {
            if (allflags[i].name === "label" ||
                allflags[i].name === "pin" ||
                allflags[i].name === "flag") {
                mymap.removeChild(allflags[i]);
                i--;
            }
        }
    }

    function removeLabels() {
        var mymap = document.getElementById("mapgrid");
        var allflags = mymap.childNodes;
        for (var i = 0; i < allflags.length; i++) {
            if (allflags[i].name === "label") {
                mymap.removeChild(allflags[i]);
                i--;
            }
        }
    }

    function removeFlags() {
        var mymap = document.getElementById("mapgrid");
        var allflags = mymap.childNodes;
        for (var i = 0; i < allflags.length; i++) {
            if (allflags[i].name === "flag") {
                mymap.removeChild(allflags[i]);
                i--;
            }
        }
    }

    function loadedImg() {
        imagesLoaded++;

        if (imagesLoaded >= 0) {
            var loadbox = document.getElementById("loadingbox");
            loadbox.style.overflow = "hidden";
        }
    }

    function matches(string, keywords) {
        var myString = string.toLowerCase();
        for (var i = 0; i < keywords.length; i++)
            if (myString.indexOf(keywords[i]) >= 0)
                return true;
        return false;
    }

    function addResult(node, item, itemLoc) {
        var newlink = document.createElement('a');
        newlink.appendChild(document.createTextNode(item));
        newlink.setAttribute("href", "#");
        newlink.onclick = function () {
            gotoXY(itemLoc);
        }
        node.appendChild(newlink);
        node.appendChild(document.createElement('br'));
    }

    function doSearch() {
        var stext = document.getElementById("searchtext").value;
        if (stext === "")
            return clearSearch();
        stext = stext.toLowerCase().split(" ");

        var results = document.getElementById("searchres");
        for (var i = 0; i < results.childNodes.length; i++) {
            results.removeChild(results.childNodes[i]);
            i--;
        }
        var nummatch = document.createTextNode("Searching...");
        var under = document.createElement('u');
        results.appendChild(under);
        under.appendChild(nummatch);
        results.appendChild(document.createElement('br'));
        var num = 0;
        for (var i = 0; i < labels.length; i++) {
            if (matches(labels[i][4], stext)) {
                addResult(results, labels[i][3], labels[i]);
                num++;
            }
        }
        for (var i = 0; i < portals.length; i++) {
            if (matches(portals[i][3], stext)) {
                addResult(results, portals[i][3], portals[i]);
                num++;
            }
        }

        for (var i = 0; i < flag[0].length; i++) {
            if (flag[0][i].length > 3 && matches(flag[0][i][3], stext)) {
                addResult(results, flag[0][i][3], flag[0][i]);
                num++;
            }
        }
        for (var lvl = 1; lvl <= 10; lvl++) {
            for (var i = 0; i < flag[lvl].length; i++) {
                if (flag[lvl][i].length > 3 && matches(flag[lvl][i][3], stext)) {
                    addResult(results, flag[lvl][i][3] + " (" + lvl + " Level Underground)", flag[lvl][i]);
                    num++;
                }
            }
        }

        nummatch.nodeValue = num + " matches found";
    }

    function clearSearch() {
        document.getElementById("searchtext").value = "";
        var results = document.getElementById("searchres");
        for (var i = 0; i < results.childNodes.length; i++) {
            results.removeChild(results.childNodes[i]);
            i--;
        }
        results.appendChild(document.createTextNode("Find map items by words in their names or descriptions."));
    }

    function noTip() {
        var tipbox = document.getElementById("tipbox");
        tipbox.removeChild(tipbox.firstChild);
        tipbox.appendChild(document.createTextNode(" "));
    }

    function setTip(text) {
        var tipbox = document.getElementById("tipbox");
        tipbox.removeChild(tipbox.firstChild);
        tipbox.appendChild(document.createTextNode(text));
    }

    function setDesc(node, text) {
        node.onmouseover = function () {
            setTip(text);
        }
        node.onmouseout = function () {
            noTip();
        }
    }

    function loadImages() {
        // loads the appropriate images based on cellX, cellY, magLevel
        //     and groundLevel
        var id_table = document.getElementById("mapgridinner");
        var myrows = id_table.getElementsByTagName("tr");
        var mycels = [];
        for (var i = 0; i < myrows.length; i++) {
            mycels[i] = myrows[i].getElementsByTagName("td");
        }
        var procY = [3, 2, 2, 2, 3, 4, 4, 4, 3, 1, 1, 1, 1, 1, 2, 3, 4, 5, 5, 5, 5, 5, 4, 3, 2, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 6, 6, 6, 6, 6, 6, 5, 4, 3, 2, 1];
        var procX = [3, 2, 3, 4, 4, 4, 3, 2, 2, 1, 2, 3, 4, 5, 5, 5, 5, 5, 4, 3, 2, 1, 1, 1, 1, 0, 1, 2, 3, 4, 5, 6, 6, 6, 6, 6, 6, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0];

        for (var j = 0; j < procX.length; j++) {
            var idx = ((cellX + procX[j]) + (6 * magLevel * (cellY + procY[j])));
            if ((cellX + procX[j] >= 0 && cellX + procX[j] < 6 * magLevel &&
                cellY + procY[j] >= 0 && cellY + procY[j] < 6 * magLevel))
                mycels[procY[j]][procX[j]].getElementsByTagName("img")[0].src =
                    "./tiles/mag" +
                    magLevel + "-lvl" + groundLevel + "/oberin-" +
                    idx + ".jpg";
            else
                imagesLoaded++;
        }
        xmin = parseInt(cellX * 128 * 4 / magLevel);
        xrange = xmin + parseInt(7 * 128 * 4 / magLevel);
        ymin = parseInt(cellY * 128 * 4 / magLevel);
        yrange = ymin + parseInt(7 * 128 * 4 / magLevel);

        addLabels();
        addPins();
        addFlags();

        var newNE = getNE(cellX, cellY, offsetX, offsetY);
        var coordsbox = document.getElementById("coordsbox");
        coordsbox.removeChild(coordsbox.firstChild);
        coordsbox.appendChild(document.createTextNode(newNE[0] + "N " +
            newNE[1] + "E"));

        return false;
    }

    function addLabels() {
        if (document.getElementById("labels").checked)
            return;
        if (groundLevel !== 0)
            return;

        var flaglayer = document.getElementById("mapgrid");

        // Add labels
        for (var i = 0; i < labels.length; i++)
            addLabel(flaglayer, labels[i]);
    }

    function addFlags() {
        var flaglayer = document.getElementById("mapgrid");

        var disportals = document.getElementById("portals").checked;
        var disupdown = document.getElementById("updown").checked;
        var dischests = document.getElementById("chests").checked;
        var disguilds = document.getElementById("guilds").checked;
        var disothers = document.getElementById("other").checked;

        if (!disportals && groundLevel === 0) {
            for (var i = 0; i < portals.length; i++)
                addImg(flaglayer, portals[i][2] + ".gif",
                    portals[i], "flag");
        }

        for (var i = 0; i < flag[groundLevel].length; i++) {
            var imgname = flag[groundLevel][i][2];
            if (imgname === "down" || imgname === "up") {
                if (!disupdown && magLevel > 2)
                    addImg(flaglayer, imgname + ".gif",
                        flag[groundLevel][i], "flag");
            } else if (imgname === "chest") {
                if (!dischests && magLevel > 2)
                    addImg(flaglayer, imgname + ".gif",
                        flag[groundLevel][i], "flag");
            } else if (imgname === "guild") {
                if (!disguilds && magLevel > 1)
                    addImg(flaglayer, imgname + ".gif",
                        flag[groundLevel][i], "flag");
            } else {
                if (!disothers && magLevel > 8)
                    addImg(flaglayer, imgname + ".gif",
                        flag[groundLevel][i], "flag");
            }
        }
    }

    function addLabel(flaglayer, myLabel) {
        if (myLabel[0] < xmin || myLabel[0] > xrange ||
            myLabel[1] < ymin || myLabel[1] > yrange)
            return;
        var xloc = parseInt((myLabel[0] - xmin) * magLevel / 4);
        var yloc = parseInt((myLabel[1] - ymin) * magLevel / 4);
        var newNode = document.createElement('table');
        newNode.name = "label";
        newNode.style.position = "absolute";
        newNode.style.top = yloc + "px";
        newNode.style.left = xloc + "px";
        newNode.style.marginLeft = "-35px";
        newNode.style.marginTop = "-25px";
        newNode.style.width = "70px";
        newNode.style.height = "50px";
        newNode.style.fontSize = myLabel[2];
        newNode.style.color = "#000";
        var td = document.createElement('td');
        td.align = "center";
        td.valign = "middle";
        td.appendChild(document.createTextNode(myLabel[3]));
        var tr = document.createElement('tr');
        tr.appendChild(td);
        newNode.appendChild(tr);
        setDesc(newNode, myLabel[4]);
        flaglayer.appendChild(newNode);
    }

    function addImg(flaglayer, imgsrc, imgLoc, name) {
        if (imgLoc[0] < xmin || imgLoc[0] > xrange ||
            imgLoc[1] < ymin || imgLoc[1] > yrange)
            return;
        var xloc = parseInt((imgLoc[0] - xmin) * magLevel / 4);
        var yloc = parseInt((imgLoc[1] - ymin) * magLevel / 4);
        var newNode = document.createElement('img');
        newNode.src = "./images/" + imgsrc;
        newNode.style.position = "absolute";
        newNode.style.top = yloc + "px";
        newNode.style.left = xloc + "px";
        newNode.style.marginLeft = "-12px";
        newNode.style.marginTop = "-12px";
        if (name === "pin")
            newNode.style.marginTop = "-24px";
        newNode.style.width = "24px";
        newNode.style.height = "24px";
        newNode.name = name;
        if (imgLoc.length > 3)
            setDesc(newNode, imgLoc[3]);
        flaglayer.appendChild(newNode);
    }

    function changeMagLevel(newMagLevel, newGroundLevel) {
        if (newMagLevel === magLevel && newGroundLevel === groundLevel)
            return;
        for (var i = 1; i <= 32; i *= 2) {
            document.getElementById("magchoice" + i + "-0").src = "./images/slider-off.gif";
        }
        for (var i = 1; i <= 10; i++) {
            document.getElementById("magchoice32-" + i).src = "./images/slider-off.gif";
        }
        document.getElementById("magchoice" + newMagLevel +
            "-" + newGroundLevel).src = "./images/slider-on.gif";

        var currXY = getCurrentXY();
        magLevel = newMagLevel;
        groundLevel = newGroundLevel;
        return gotoXY(currXY);
    }

    function incMagLevel() {
        if (groundLevel >= 10)
            return;
        if (magLevel === 32)
            return changeMagLevel(32, groundLevel + 1);
        return changeMagLevel(magLevel * 2, 0);
    }

    function decMagLevel() {
        if (magLevel === 1)
            return;
        if (groundLevel > 0)
            return changeMagLevel(32, groundLevel - 1);
        return changeMagLevel(magLevel / 2, 0);
    }

    function reCenter() {
        return gotoXY([1279, 1279]);
    }

    function resetMap() {
        magLevel = 1;
        groundLevel = 0;
        return reCenter();
    }

    function getCurrentXY() {
        return getXY(cellX, cellY, offsetX, offsetY)
    }

    function getCurrentNE() {
        return getNE(cellX, cellY, offsetX, offsetY)
    }

    function getNE(myCellX, myCellY, myOffsetX, myOffsetY) {
        return XYtoNE(getXY(myCellX, myCellY, myOffsetX, myOffsetY));
    }

    function gotoNE(myNE) {
        return gotoXY(NEtoXY(myNE));
    }

    function clearSeOrb() {
        document.getElementById("hereX").value = "";
        addPins();
    }

    function setSeOrb() {
        var north = parseInt(document.getElementById("sexnorth").value);
        var nplus = parseInt(document.getElementById("orbnorth").value);
        var east = parseInt(document.getElementById("sexeast").value);
        var eplus = parseInt(document.getElementById("orbeast").value);

        nplus = (isNaN(nplus) ? 0 : nplus);
        eplus = (isNaN(eplus) ? 0 : eplus);

        if (isNaN(north) || isNaN(east)) {
            document.getElementById("hereX").value = "";
            addPins();
            return;
        }

        var here = NEtoXY([north, east]);
        var there = ["", ""];
        if (nplus !== 0 || eplus !== 0)
            there = NEtoXY([north + nplus, east + eplus]);

        // set 4 hidden vars
        document.getElementById("hereX").value = here[0];
        document.getElementById("hereY").value = here[1];
        document.getElementById("thereX").value = there[0];
        document.getElementById("thereY").value = there[1];

        addPins();
        return gotoXY(here);
    }

    function addPins() {
        var hereX = parseInt(document.getElementById("hereX").value);
        var hereY = parseInt(document.getElementById("hereY").value);
        var thereX = parseInt(document.getElementById("thereX").value);
        var thereY = parseInt(document.getElementById("thereY").value);

        var flaglayer = document.getElementById("mapgrid");

        // delete old pins
        var allflags = flaglayer.childNodes;
        for (var i = 0; i < allflags.length; i++) {
            if (allflags[i].name === "pin") {
                flaglayer.removeChild(allflags[i]);
                i--;
            }
        }

        if (isNaN(hereX) || isNaN(hereY))
            return;
        addImg(flaglayer, "here.gif", [hereX, hereY, "here", "You are here."], "pin");

        // add new pins
        if (isNaN(thereX) || isNaN(thereY))
            return;
        addImg(flaglayer, "there.gif", [thereX, thereY, "there", "The character you orbed is here."], "pin");
    }

    function getXY(myCellX, myCellY, myOffsetX, myOffsetY) { // In terms of the 4X map (starting at 0,0)!!!
        var X = parseInt((((myCellX + 1) * 128 - myOffsetX + 320) * 4) / magLevel);
        var Y = parseInt((((myCellY + 1) * 128 - myOffsetY + 320) * 4) / magLevel);
        return [X, Y];
    }

    function gotoXY(myXY) {
        clearImages();

        dd.elements.mapgrid.moveBy(-1 * offsetX, -1 * offsetY);

        cellX = -3;
        cellY = -3;
        offsetX = 64 - parseInt(myXY[0] * magLevel / 4);
        offsetY = 64 - parseInt(myXY[1] * magLevel / 4);

        while (offsetX > 64) {
            cellX--;
            offsetX -= 128;
        }
        while (offsetX < -64) {
            cellX++;
            offsetX += 128;
        }
        while (offsetY > 64) {
            cellY--;
            offsetY -= 128;
        }
        while (offsetY < -64) {
            cellY++;
            offsetY += 128;
        }

        dd.elements.mapgrid.moveBy(offsetX, offsetY);

        loadImages();
    }

    function XYtoNE(XY) {
        var N = parseInt(root2 * (5341 - XY[0] - XY[1]) / 2) - 1178 + 221;
        var E = parseInt(root2 * (2653 + XY[0] - XY[1]) / 2) - 1181 + 218;
        return [N, E];
    }

    function NEtoXY(myNE) {
        myNE[0] -= 221;
        myNE[1] -= 218;
        var X = 1344 + parseInt(root2 * (myNE[1] - myNE[0] + 3) / 2);
        var Y = 3997 - parseInt(root2 * (myNE[1] + myNE[0] + 2359) / 2);
        return [X, Y];
    }

    // -->
</script>

<div style="position:relative; width:100%; height:650px; z-index:1;">
    <div id="map">
        <div cellpadding="0" cellspacing="0" id="mapgrid">
            <table border="0" cellpadding="0" cellspacing="0" id="mapgridinner">
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
                <tr>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                    <td width="128"><img border="0" height="128"
                                         onerror="this.src='./images/trans.gif';" onload="loadedImg();" src="./images/trans.gif" width="128"/>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <table border="0" cellpadding="0" cellspacing="0" id="magchanger">
        <tr>
            <td><a href="#" onclick="decMagLevel(); return false;"><img border="0" onmouseout="return noTip()"
                                                                        onmouseover="return setTip('Decrease Magnification')"
                                                                        src="./images/slider-top.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(1,0); return false;"><img border="0" id="magchoice1-0"
                                                                              onmouseout="return noTip()"
                                                                              onmouseover="return setTip('1X Magnification')"
                                                                              src="./images/slider-on.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(2,0); return false;"><img border="0" id="magchoice2-0"
                                                                              onmouseout="return noTip()"
                                                                              onmouseover="return setTip('2X Magnification')"
                                                                              src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(4,0); return false;"><img border="0" id="magchoice4-0"
                                                                              onmouseout="return noTip()"
                                                                              onmouseover="return setTip('4X Magnification')"
                                                                              src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(8,0); return false;"><img border="0" id="magchoice8-0"
                                                                              onmouseout="return noTip()"
                                                                              onmouseover="return setTip('8X Magnification')"
                                                                              src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(16,0); return false;"><img border="0" id="magchoice16-0"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('16X Magnification')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,0); return false;"><img border="0" id="magchoice32-0"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('32X Magnification')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><img src="./images/slider-break.gif"/></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,1); return false;"><img border="0" id="magchoice32-1"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('1st Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,2); return false;"><img border="0" id="magchoice32-2"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('2nd Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,3); return false;"><img border="0" id="magchoice32-3"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('3rd Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,4); return false;"><img border="0" id="magchoice32-4"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('4th Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,5); return false;"><img border="0" id="magchoice32-5"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('5th Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,6); return false;"><img border="0" id="magchoice32-6"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('6th Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,7); return false;"><img border="0" id="magchoice32-7"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('7th Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,8); return false;"><img border="0" id="magchoice32-8"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('8th Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,9); return false;"><img border="0" id="magchoice32-9"
                                                                               onmouseout="return noTip()"
                                                                               onmouseover="return setTip('9th Level Underground (32X Magnification)')"
                                                                               src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="changeMagLevel(32,10); return false;"><img border="0" id="magchoice32-10"
                                                                                onmouseout="return noTip()"
                                                                                onmouseover="return setTip('10th Level Underground (32X Magnification)')"
                                                                                src="./images/slider-off.gif"/></a></td>
        </tr>
        <tr>
            <td><a href="#" onclick="incMagLevel(); return false;"><img border="0" onmouseout="return noTip()"
                                                                        onmouseover="return setTip('Increase Magnification')"
                                                                        src="./images/slider-bottom.gif"/></a></td>
        </tr>
    </table>

    <div id="loadingbox">
    </div>
    <div id="warningbox">Error: Zooming beyond 2x magnification is restricted to Rhovanion Rebels only.
    </div>

    <div id="coordsbox">&nbsp;</div>

    <div id="tipbox">&nbsp;</div>
    <table id="sidebar2">
        <tr>
            <td class="category"><a href="#" onclick="return hidify_showify('keys','keys_arrow');"><img
                    alt="Collapse" border="0" id="keys_arrow" src="./images/arrow_up.gif"/> Key</a></td>
        </tr>
        <tr>
            <td id="keys">
                <table class="invtable">
                    <tr>
                        <td><img height="24" src="./images/up.gif" width="24"/></td>
                        <td>Path Up</td>
                        <td><img height="24" src="./images/down.gif" width="24"/></td>
                        <td>Path Down</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/cross.gif" width="24"/></td>
                        <td>Temple</td>
                        <td><img height="24" src="./images/orange.gif" width="24"/></td>
                        <td>Orange Portal</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/bsing.gif" width="24"/></td>
                        <td>Forge</td>
                        <td><img height="24" src="./images/cook.gif" width="24"/></td>
                        <td>Fireplace or Firepit</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/food.gif" width="24"/></td>
                        <td>Restaurant</td>
                        <td><img height="24" src="./images/beer.gif" width="24"/></td>
                        <td>Pub</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/bank.gif" width="24"/></td>
                        <td>Bank</td>
                        <td><img height="24" src="./images/barn.gif" width="24"/></td>
                        <td>Stable</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/torch.gif" width="24"/></td>
                        <td>General Store</td>
                        <td><img height="24" src="./images/leaf.gif" width="24"/></td>
                        <td>Reagent Shop</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/shield.gif" width="24"/></td>
                        <td>Armor Shop</td>
                        <td><img height="24" src="./images/sword.gif" width="24"/></td>
                        <td>Weapon Shop</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/bow.gif" width="24"/></td>
                        <td>Archery Shop</td>
                        <td><img height="24" src="./images/white.gif" width="24"/></td>
                        <td>Jeweler</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/bottle.gif" width="24"/></td>
                        <td>Potion Shop</td>
                        <td><img height="24" src="./images/stars.gif" width="24"/></td>
                        <td>Magic Shop</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/pliers.gif" width="24"/></td>
                        <td>Tinkering Shop</td>
                        <td><img height="24" src="./images/scissors.gif" width="24"/></td>
                        <td>Tailoring Shop</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/hotel.gif" width="24"/></td>
                        <td>Inn</td>
                        <td><img height="24" src="./images/house.gif" width="24"/></td>
                        <td>House</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/chest.gif" width="24"/></td>
                        <td>Treasure Chest</td>
                        <td><img height="24" src="./images/jail.gif" width="24"/></td>
                        <td>Jail</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/castle.gif" width="24"/></td>
                        <td>Castle</td>
                        <td><img height="24" src="./images/chess.gif" width="24"/></td>
                        <td>Chess Board</td>
                    </tr>
                    <tr>
                        <td><img height="24" src="./images/guild.gif" width="24"/></td>
                        <td>Guild Hall</td>
                        <td><img height="24" src="./images/death.gif" width="24"/></td>
                        <td>Cemetary</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <table id="sidebar">
        <tr>
            <td class="category"><a href="#" onclick="return hidify_showify('pins','pins_arrow');"><img
                    alt="Collapse" border="0" id="pins_arrow" src="./images/arrow_up.gif"/> Pins</a></td>
        </tr>
        <tr>
            <td id="pins">
                <form onsubmit="setSeOrb(); return false;">
                    <input id="hereX" type="hidden" value=""/>
                    <input id="hereY" type="hidden" value=""/>
                    <input id="thereX" type="hidden" value=""/>
                    <input id="thereY" type="hidden" value=""/>
                    <table class="invtable">
                        <tr>
                            <td rowspan="2" valign="middle" width="24"><img alt="" height="24" src="./images/here.gif"
                                                                            width="24"/></td>
                            <td>Sextant</td>
                        </tr>
                        <tr>
                            <td align="center"><input id="sexnorth" size="4" type="text"/>N&nbsp;<input id="sexeast"
                                                                                                        size="4"
                                                                                                        type="text"/>E
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2" valign="middle" width="24"><img alt="" height="24" src="./images/there.gif"
                                                                            width="24"/></td>
                            <td>Orb</td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2"><input id="orbnorth" size="4" type="text"/>N&nbsp;<input
                                    id="orbeast" size="4" type="text"/>E
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2"><input type="submit" value="Set"/>&nbsp; <input onclick="clearSeOrb(); return false;"
                                                                                                           type="button"
                                                                                                           value="Clear"/>
                            </td>
                        </tr>
                    </table>
                </form>
            </td>
        </tr>
        <tr>
            <td class="category"><a href="#" onclick="return hidify_showify('search','search_arrow');"><img
                    alt="Expand" border="0" id="search_arrow" src="./images/arrow_down.gif"/> Search</a></td>
        </tr>
        <tr>
            <td id="search">
                <form onsubmit="doSearch(); return false;">
                    <table class="invtable">
                        <tr>
                            <td><input id="searchtext" type="text"/></td>
                        </tr>
                        <tr>
                            <td><input type="submit" value="Search"/>&nbsp; <input onclick="clearSearch(); return false;"
                                                                                   type="button"
                                                                                   value="Clear"/></td>
                        </tr>
                        <tr>
                            <td id="searchres">Find map items by words in their names or descriptions.</td>
                        </tr>
                        </tr>
                    </table>
                </form>
            </td>
        </tr>
        <!--  <tr>-->
        <!--    <td class="category"><a href="#" onclick="return hidify_showify('keys','keys_arrow');"><img src="./images/arrow_down.gif" alt="Expand" border="0" id="keys_arrow" /> Key</a></td>-->
        <!--  </tr>-->
        <!--  <tr>-->
        <!--    <td id="keys">-->
        <!--      <table class="invtable">-->
        <!--      <tr>-->
        <!--        <td><img src="./images/up.gif" width="24" height="24" /></td>-->
        <!--        <td>Path Up</td>-->
        <!--        <td><img src="./images/down.gif" width="24" height="24" /></td>-->
        <!--        <td>Path Down</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/cross.gif" width="24" height="24" /></td>-->
        <!--        <td>Temple</td>-->
        <!--        <td><img src="./images/orange.gif" width="24" height="24" /></td>-->
        <!--        <td>Orange Portal</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/bsing.gif" width="24" height="24" /></td>-->
        <!--        <td>Forge</td>-->
        <!--        <td><img src="./images/cook.gif" width="24" height="24" /></td>-->
        <!--        <td>Fireplace or Firepit</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/food.gif" width="24" height="24" /></td>-->
        <!--        <td>Restaurant</td>-->
        <!--        <td><img src="./images/beer.gif" width="24" height="24" /></td>-->
        <!--        <td>Pub</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/bank.gif" width="24" height="24" /></td>-->
        <!--        <td>Bank</td>-->
        <!--        <td><img src="./images/barn.gif" width="24" height="24" /></td>-->
        <!--        <td>Stable</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/torch.gif" width="24" height="24" /></td>-->
        <!--        <td>General Store</td>-->
        <!--        <td><img src="./images/leaf.gif" width="24" height="24" /></td>-->
        <!--        <td>Reagent Shop</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/shield.gif" width="24" height="24" /></td>-->
        <!--        <td>Armor Shop</td>-->
        <!--        <td><img src="./images/sword.gif" width="24" height="24" /></td>-->
        <!--        <td>Weapon Shop</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/bow.gif" width="24" height="24" /></td>-->
        <!--        <td>Archery Shop</td>-->
        <!--        <td><img src="./images/white.gif" width="24" height="24" /></td>-->
        <!--        <td>Jeweler</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/bottle.gif" width="24" height="24" /></td>-->
        <!--        <td>Potion Shop</td>-->
        <!--        <td><img src="./images/stars.gif" width="24" height="24" /></td>-->
        <!--        <td>Magic Shop</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/pliers.gif" width="24" height="24" /></td>-->
        <!--        <td>Tinkering Shop</td>-->
        <!--        <td><img src="./images/scissors.gif" width="24" height="24" /></td>-->
        <!--        <td>Tailoring Shop</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/hotel.gif" width="24" height="24" /></td>-->
        <!--        <td>Inn</td>-->
        <!--        <td><img src="./images/house.gif" width="24" height="24" /></td>-->
        <!--        <td>House</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/chest.gif" width="24" height="24" /></td>-->
        <!--        <td>Treasure Chest</td>-->
        <!--        <td><img src="./images/jail.gif" width="24" height="24" /></td>-->
        <!--        <td>Jail</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/castle.gif" width="24" height="24" /></td>-->
        <!--        <td>Castle</td>-->
        <!--        <td><img src="./images/chess.gif" width="24" height="24" /></td>-->
        <!--        <td>Chess Board</td>-->
        <!--      </tr>-->
        <!--      <tr>-->
        <!--        <td><img src="./images/guild.gif" width="24" height="24" /></td>-->
        <!--        <td>Guild Hall</td>-->
        <!--        <td><img src="./images/death.gif" width="24" height="24" /></td>-->
        <!--        <td>Cemetary</td>-->
        <!--      </tr>-->
        <!--      </table>-->
        <!--    </td>-->
        <!--  </tr>-->
        <tr>
            <td class="category"><a href="#" onclick="return hidify_showify('settings','settings_arrow');"><img
                    alt="Expand" border="0" id="settings_arrow" src="./images/arrow_down.gif"/> Settings</a></td>
        </tr>
        <tr>
            <td id="settings">
                <form onsubmit="return false;">
                    <table class="invtable">
                        <tr>
                            <td>Disable:</td>
                        </tr>
                        <tr>
                            <td><input id="labels" onclick="removeLabels(); addLabels(); return true;" type="checkbox"/>
                                Labels
                            </td>
                        </tr>
                        <tr>
                            <td><input id="portals" onclick="removeFlags(); addFlags(); return true;" type="checkbox"/>
                                Portals
                            </td>
                        </tr>
                        <tr>
                            <td><input id="updown" onclick="removeFlags(); addFlags(); return true;" type="checkbox"/>
                                Up/Down Arrows
                            </td>
                        </tr>
                        <tr>
                            <td><input id="chests" onclick="removeFlags(); addFlags(); return true;" type="checkbox"/>
                                Treasure Chests
                            </td>
                        </tr>
                        <tr>
                            <td><input id="guilds" onclick="removeFlags(); addFlags(); return true;" type="checkbox"/>
                                Guild Halls
                            </td>
                        </tr>
                        <tr>
                            <td><input id="other" onclick="removeFlags(); addFlags(); return true;" type="checkbox"/>
                                All Other Icons
                            </td>
                        </tr>
                    </table>
                </form>
    </table>
</div>

<script type="text/javascript">
    // <!--

    imagesLoaded = -49;
    loadImages();
    SET_DHTML("mapgrid");

    //-->
</script>
</body>
